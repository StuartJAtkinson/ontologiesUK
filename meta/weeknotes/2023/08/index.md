# 2023 - Week 8

## Lifting / shifting

If our regular reader has turned up in expectation of the usual procedural [pedantic web](https://en.wikipedia.org/wiki/Semantic_Web) content, we fear they're in for something of a disappointment. It's not only the ins and outs of statutory instrument and treaty procedure round our house. Sometimes, we have to get our heads down and do actual computational things. It may not please our reader. It does not please us. But someone needs to take care of the blasted things.

Late last year - sometime around October we think - a slightly ominous popup appeared in Azure. As is the wont of Microsoft products. We were to consider ourselves warned that [support for Ruby 2.7.2 would cease in April](https://azure.microsoft.com/en-gb/updates/rubysupport/). This made some sense. Ruby 2.7.2 being several version numbers before the latest stable release. Hurrah, we thought. Someone in Seattle has given some thought to security vulnerabilities.

We made an appointment with ourselves for the new year expecting, at worst, a week's worth of updating Ruby, [Rails](https://en.wikipedia.org/wiki/Ruby_on_Rails) and associated [Gems](https://en.wikipedia.org/wiki/RubyGems). Imagine our disappointment when we reconvened, examined the small-print and found our partners were not only deprecating Ruby 2.7.2, but deprecating Ruby altogether. In the bin. Begone. Adding insult to injury was the news that users of Azure wishing to use Ruby could by all means crack on - but [only via the medium of Docker](https://github.com/Azure/app-service-linux-docs/blob/master/HowTo/use_ruby_with_container.md#how-to-run-ruby-on-rails-custom-container-on-app-service). Something we wouldn't wish on our worst enemy. But who are we. It's one way to run a "cloud platform", we suppose.

There we were, in the unenviable position of having a handful of Ruby applications and nowhere to run them. It was with an exccellent sense of timing that the syncing scripts from our Google calendars to our beloved [egg timer](https://api.parliament.uk/egg-timer) chose this moment to fall over. A tragic event coinciding with [our Jianhan](https://twitter.com/jianhanzhu)'s absence from the office. Our plucky computational experts [Young Robert](https://mastodon.me.uk/@robertbrook) and [Michael](https://mastodon.me.uk/@fantasticlife) pressed on, searching the length and breadth of Azure for the application logs. And came back empty handed. Dear reader, you have more chance of seeing your early day motion paying tribute to Doris and the twenty thankless years she kept the tea urn hot debated on the floor of the House than you do of tracking down application logs on Azure.

Fortunately, [boss's boss Bryn](https://twitter.com/brynmrgn) is recently in possession of a corporate credit card, which he plugged into [Heroku](https://en.wikipedia.org/wiki/Heroku). Since then, Young Robert and Michael have been manning the GitHub wheel. So far our [written answer bots](https://written-questions.herokuapp.com/), the [MNIS prodder](https://api.parliament.uk/mnis-prodder) and our beloved egg timer have been migrated. [UK general elections](https://api.parliament.uk/uk-general-elections) to follow shortly. You're thinking it, so we'll say it - and they're veritable swans those two, gracefully navigating computational waters, little legs paddling furiously away below the surface.

## Oiling the machinery of gumint

Recent changes to the machinery of government will not have escaped our reader's attention. If you tuned in back in [week 6](https://ukparliament.github.io/ontologies/meta/weeknotes/2023/06/#librarians-of-the-week), you'll know that Librarian Emily put in a good enough data wrangling shift to win her a third share in our much coveted Librarian of the Week Award. Departments, positions, incumbencies and people all being subject to her shunting efforts. Unfortunately, the creation of new laying bodies requires the attentions of our Jianhan and our Jianhan was sadly unavailable. So, for a wee while, our crack team of librarians were forced to add a handful of new [work packages](https://ukparliament.github.io/ontologies/procedure/procedure-ontology#d4e222) with no laying body. Thankfully, Jianhan has now returned to the fold and that gap has been plugged. We now have our [first statutory instrument laid by the Department for Business and Trade](https://statutoryinstruments.parliament.uk/?SearchTerm=&House=&LayingBodyId=iOu7GKad&Procedure=&ParliamentaryProcess=&RecommendedForProcedureChange=&ConcernsRaisedByCommittee=&MotionToStop=&DebateScheduled=&ShowAdvanced=true). Should an SI arrive from the [Department for Energy Security and Net Zero](https://www.gov.uk/government/organisations/department-for-energy-security-and-net-zero/about), the [Department for Science, Innovation and Technology](https://www.gov.uk/government/organisations/department-for-science-innovation-and-technology/about) or the [Department for Culture, Media and Sport](https://www.gov.uk/government/organisations/department-for-culture-media-and-sport), all three laying bodies wait in the wings.

Our eagle-eyed reader may well notice that the laying body drop-downs on both the [SI website](https://statutoryinstruments.parliament.uk/) and the [treaty tracker](https://treaties.parliament.uk/) grow ever longer, showing current departments alongside departments long dead. Please rest assured. Jianhan has also applied end dates to defunct departments, so at least our computers can differentiate. We'd rather like our users to be able to differentiate too, but, sadly, website serialisation remains outside our control.

## Procedural parsing

As we've attempted to explain at some length, there's little point in making [machine readable procedure maps](https://ukparliament.github.io/ontologies/procedure/maps/) if you don't have the code to parse them. Luckily, [we do](https://github.com/ukparliament/procedure-parsing). Equally luckily, we have our Jianhan back. As new features get added to the model, we're keen to keep model, information and machines in sync, so this week Jianhan's also been adding [step depth](https://ukparliament.github.io/ontologies/procedure/procedure-ontology#d4e255) awareness to our parsing code. Which means steps having been [parsed and deemed to be caused to happen, allowed to happen or precluded from happening](https://ukparliament.github.io/ontologies/procedure/maps/meta/design-notes/#potential-states-of-a-business-step), all [now appear in procedural order](https://procedures.azurewebsites.net/WorkPackages/5421/stepreport). A change that should make our crack team of librarians' lives much happier. Have a click. See what you think. Top work, as ever, Jianhan.

## Backing gracefully away from parliamentary papers

Back in [week 6](https://ukparliament.github.io/ontologies/meta/weeknotes/2023/06/#on-the-mystery-of-parliamentary-papers), we were still struggling with the distinction between papers and parliamentary papers. Off the back of weeknotes, Journal Office Eve got in touch to point out that, whilst [Erskine May defines parliamentary papers quite widely](https://erskinemay.parliament.uk/section/6445/introduction-to-parliamentary-papers-publications-and-records/), the [Parliamentary Papers Act 1840](https://www.legislation.gov.uk/ukpga/Vict/3-4/9/contents) takes a narrower view, being papers published by order of or under the authority of either House. Eve went on to point out that changes to publication practice have led to a schism between legal meaning and common parlance. Not being masochists, these are clearly not waters we wish to wade into and our - possibly naive - desire to separate papers and parliamentary papers has now been abandoned.

Occasionally we get asked why we bother to write weeknotes. This is exactly why we write weeknotes. You don't get these kind of insights from distributing a RAG report. Thanks JO Eve.

## Procedural cartography

Not much news on the procedural cartography front this week. Librarian Jayne and her computational cabin boy Michael continue to plug away at documenting what can happen to a motion and when and why. Once the [cheat sheets](https://ukparliament.github.io/ontologies/procedure/maps/meta/motion-cheat-sheets/) are complete and signed off by the usual suspects, they plan to incorporate all they've learned back into map land.

Librarian Jayne has made a small tweak to our [CRaG treaty map](https://ukparliament.github.io/ontologies/procedure/maps/treaties/crag-treaties/crag-treaties.pdf), where urgent questions in the House of Lords are no longer self-precluding. Which means we can now capture questions in the plural where that happens. Which [it does](https://hansard.parliament.uk/Lords/2022-10-26/debates/066EF61C-72FB-450B-84F1-8485E4BA8629/UK-IndiaFreeTradeDeal).

Over in statutory instrument land, Librarian Jayne stumbled across an unexpected motion in the early day bagging area when the [Official Controls (Northern Ireland) Regulations 2023](https://statutoryinstruments.parliament.uk/instrument/Lzd3QdY2/) turned up with both a [fatal prayer](https://edm.parliament.uk/early-day-motion/60551) and an [accompanying EDM](https://edm.parliament.uk/early-day-motion/60552). Unfortunately, the [EDM website](https://edm.parliament.uk/) does not allow associated EDMs to be linked together. An unfortunate omission. In the absence of a link on that side, we wondered if we should add one on ours. We already have steps dealing with fatal motions - obviously - but nothing covering accompanying EDMs. A convention of crack librarians was convened, which came to the conclusion that we can't keep expanding the procedure maps to plaster over cracks in the rest of the website. Always nice when we decide to do nothing.

In other exciting mapping news, Librarians Jayne and [Ayesha](https://mastodon.me.uk/@askalibrarylady) have finally finished checking all the [routes](https://ukparliament.github.io/ontologies/procedure/procedure-ontology#d4e164) in our [legislative reform order map](https://ukparliament.github.io/ontologies/procedure/maps/legislation/secondary/statutory-instruments/super-affirmative-procedures/legislative-reform-orders/legislative-reform-order.pdf). That's 1441 routes which is a hell of a lot of routes. Their efforts were rewarded when they found two routes accidentally plugged into the wrong [steps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology#d4e175). Given our data input workflow involves computational cabin lad Michael reading out 'AB AND to BC NOT' over a wonky Teams line, such an error rate only goes to show that Michael's diction is improving. Or Jayne has learnt to lip read.

## Electioneering

Librarians Anna, Emily and [Phil](https://mastodon.social/@Mognar) continue to plug away at preparations for the next general election. Between now and then, we are, of course, expecting a boundary change. Which means the current 650 constituencies will fade out of existence and 650 new ones will need to be created. Thanks to geographic expert [Carl](https://twitter.com/carlbaker), we now have a list of proposed names for the new constituencies, the region or nation they sit inside and their type - being borough or county. The data has been [loaded into a spreadsheet](https://docs.google.com/spreadsheets/d/1aL9zZTQiFRawizFtJt_l1wcKGQ0GKLIR5JhJzkxfhbQ/edit?usp=sharing) roughly the same shape as the constituency table in [MNIS](https://data.parliament.uk/membersdataplatform/memberquery.aspx). We remain a trifle confused as what all these attributes might be, where they might be used and even whether they're used. Who knew that clerks have their own IDs and names for constituencies? I mean, it seems unlikely. We know most of the constituency table attributes are nullable and had hoped that they'd be unpopulated. At least for the current 650 constituencies. A null value being a pretty good proxy for deprecation. Librarian Anna has fired up the [OData](https://en.wikipedia.org/wiki/Open_Data_Protocol) endpoint and investigated how many of the current constituencies have a value for each attribute. Unfortunately - for us at least - quite a few of the attributes appear to be populated, 560 current constituencies having a PCon ID, for example. What a PCon ID might be and where it might be used, we have no idea. Investigations continue.

One column in the constituencies table was less of a mystery but definitely none of our business. A schools subsidy band is applied on a per constituency basis to calculate subsidies for school trips to Parliament. Colleagues in Engagement and Education have been alerted that - should the boundary change happen as expected - they have 650 new records to update.

Away from constituencies, we also have political parties to manage and [map](https://docs.google.com/spreadsheets/d/1ozIMZw2opyklwSOGtFblL8aY7r-ZSqZROrms1tPXtko/edit?usp=sharing). The MNIS admin application has an "end membership" button that triggers some kind of "wizard", but - much like all wizards - it's hard to see exactly what magick it's performing. Librarian Phil has been investigating and can now confirm said wizard does end all party affiliations. Which is nice.

Phil has also been investigating how data captured by Commons librarians in Oli's candidate database was transferred to MNIS. He's managed to uncover a couple of XML files: [one listing winning candidates](https://raw.githubusercontent.com/ukparliament/ontologies/master/meta/relational/mnis/candidates/mnis-members.xml) for the 650 constituencies, [one listing all candidates with vote counts](https://raw.githubusercontent.com/ukparliament/ontologies/master/meta/relational/mnis/candidates/mnis-results.xml). The plan remains to stop using the old candidates database and instead use feeds from [Democracy Club](https://democracyclub.org.uk/). But that relies on a lot of [careful planning](https://trello.com/b/owaHiYDj/mnis-general-elections) and a lot of identifier alignment for people, parties and constituencies. Which is why we're currently drowning in spreadsheets.

## On matters of modelling

Modelling efforts continue to concentrate on specialising the many and varied ways in which papers are [made available](https://ukparliament.github.io/ontologies/making-available/making-available-ontology) to Parliament. Or at least to a House in Parliament. In addition to our lovely [laying model](https://ukparliament.github.io/ontologies/laying/laying-ontology), we now also have [depositing](https://ukparliament.github.io/ontologies/depositing/depositing-ontology), [presentation](https://ukparliament.github.io/ontologies/presentation/presentation-ontology) and [reporting](https://ukparliament.github.io/ontologies/reporting/reporting-ontology) stacked up in the pipelines. Lovely stuff.

Librarian organ grinders Jayne and [Claire](https://twitter.com/tinysprite) alongside their computational monkeys, Young Robert and Michael, have also been busying adding comments to our [bill model](https://ukparliament.github.io/ontologies/bill/bill-ontology). Which is now complete. Or as complete as we think it needs to be to for our immediate purpose of helping Legislation Office Liam track [legislative consent motions](https://ukparliament.github.io/ontologies/procedure/maps/legislation/primary/#legislative-consent-motions).

On the subject of which, Tuesday of week 7 saw a most helpful meeting with Parliament and Constitution Centre colleagues [Graeme](https://twitter.com/woodstockjag), [Richard](https://twitter.com/Richard24235966) and [David](https://twitter.com/davidtorrance). Other than double checking we haven't made entry into LCM procedure self-precluding, we don't think we have any changes to make here. Though time will tell.

## On matters of information management

Our regular reader will know that Librarian Jayne's spent a large part of the last year adding short titles and Royal Assent dates to tens of thousands of Acts. This from a spreadsheet kindly supplied by [The National Archives](https://www.nationalarchives.gov.uk/). Librarian Jayne would like to send a shout out to Librarian Ned, who took it upon himself to run a second eye over her work. Ned has fixed typos on 89 titles. He's also highlighted three Acts that Jayne had forgotten to remove where the Royal Assent date proved impossible to track down. Not only that. Ned has also eyeballed 1016 Acts in ontology manager to check for errors there and to cross-reference with the data Jayne's collected. As ever, he's done a cracking job. The data is improved and ready for import.

Team:Thesaurus met on Thursday to agree policy for if and how the full list of Acts should be controlled. Happily - and not unexpectedly - all present agreed this was not necessary. There's an Indexing Review meeting pencilled in for early March where our crack team of librarians plan to discuss how they'll approach indexing Acts when they're available in Search.

As ever, having more than one organisation managing the same list is less than ideal from the point of view of forking. At some point, we really need to sit down with TNA types and chat APIs and interoperability. We're far from being selfish, but it's not like we wouldn't like some links back. But that's for the future.

## Kind hearts / coronets

Librarian Ned has now added [peerage holding](https://ukparliament.github.io/ontologies/peerage/peerage-ontology#d4e112) records to our [peerage database](https://peerages.historyofparliamentonline.org/) for everyone who's ever been on the [register](https://www.parliament.uk/business/publications/house-of-lords-publications/records-of-activities-and-membership/register-of-all-hereditary-peers/) of people eligible for inclusion in a [House of Lords by-election](https://en.wikipedia.org/wiki/By-elections_to_the_House_of_Lords). Or HL2 as we call it in these parts. This including everyone who's ever stood for election, lost and subsequently withdrew from the register. Top stuff.

In Lords Spiritual news, Ned, Robert and Michael continue to plug away at modelling Church of England dioceses - England only - and the bishops incumbent in them. Efforts remain concentrated on a set of Google spreadsheets which Ned's been [busy populating](https://docs.google.com/spreadsheets/d/1mT4ece_DPM6TsmFPxP6Q-Ec33qFCwFdl4OqUu8J1Li8/edit?usp=sharing). Unfortunately, it's the best we can manage given Michael still lacks a working computer. This week, Ned dredged up the matter of the [Acts of Union 1800](https://en.wikipedia.org/wiki/Acts_of_Union_1800) giving seats in the UK House of Lords to four Church of Ireland bishops, to be rotated between them. Which complicates matters enormously. The seats ended and bottoms were evicted upon disestablishment of the Church of Ireland in 1871. Whether or not we decide to bite into this cherry rather depends on whether we ever hope to describe all seat incumbencies between 1801 and 1870. We think we know what [Paul](https://twitter.com/pseaward1) would think.

## Plugging into peerages

On Wednesday afternoon, Young Robert and Michael had a pixel-based meeting with [Shedcode James](https://mastodon.me.uk/@jamesjefferies) to chat through how we might bring both peerage and standing order data into the open data platform. James has already done some work on a [REST](https://en.wikipedia.org/wiki/Representational_state_transfer)ful change event API for the latter, but there's currently no way for a computer to chat to the peerages database. It turns out that boss computational expert Ian is more a fan of push-based systems than pull-based ones. So James is planning to cost the addition of a REST API to peerages and a [message queue](https://en.wikipedia.org/wiki/Message_queue) based solution for both. Marvellous!

## And finally ...

Monday of week 8 saw your usual cast of characters meet with procedural colleagues from the Northern Ireland Assembly. For once in real life, rather than pixels. The chat was supposed to cover all matters pertaining to computational procedure but took an early swerve into difficulties emerging from [funding arrangements](https://platformplaybook.xyz/funding) and [commissioning](https://platformplaybook.xyz/identify) setups. A delightful conversation. Well, we enjoyed it anyway. Though we hope we did not bore our guests. Thanks Roisin. Thanks Michael. Thanks Kevin.
