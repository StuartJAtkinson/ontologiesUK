# 2023 - Week 48

## New, old search - frontend

Not much to report in the world of the [new, old search frontend](https://api.parliament.uk/search-prototype) this week. Not to say that work isn't happening, but it's all a bit of a plod. Data scientist Louie has once more lent a much-needed hand with the data analysis work, decanting more attribute distribution data into our righty-famed 3D data dictionary. Librarians [Anya](https://bsky.app/profile/did:plc:jumonkqor6xz4n52pgstlrra), [Jayne](https://bsky.app/profile/greytgordon.bsky.social) and Ned having been poring over the results, bringing their considerable domain expertise to analyse the analysis. All of which means, poor designer Graeme has been forced to reopen Figma and pay what might well be his third - possibly fourth - visit to designs he'd half thought done. Which, in turn, has knock-on effects on developer Jon, the "spec" he's working to changing on what feels like an hourly basis.

In a more ideal world, we would not have put pixels to pages before the data analysis work had been done. After all, even the humble carpenter needs to know the character of the materials they are working with. But we do not live in an ideal world and are always happy to play the hand we've been dealt. Chins up and smiles on faces.

Endless circling aside, progress has been made. Librarian Anya popped the bit between her teeth and decided that our very limited coverage of what we still call [E(lectronic) Petitions](https://petition.parliament.uk/) did not warrant further bother. Ingesting, subject indexing and interlinking E-Petitions was work done last time we attempted to make a data platform, but it never really went very far. This mostly because our aged computers couldn't quite cope with the volume of changes. At some point, we gave up on the idea and the pipes were turned off. Which meant our Search and Indexing triplestore ended up with a residual stump of E-Petition data that wasn't much use to anyone. Anya has decided to take a backup of the data and [purge triplestore, designs and code](https://trello.com/c/RowB9RR2/143-on-e-petitions) of any further mention. At least until we can do it properly. Well, it's one less sheet of pixels to design and one template Jon won't have to make.

A decision has also been taken on how we [handle untitled things](https://trello.com/c/qwrJ7K3T/101-a-pattern-for-untitled-things-eg-written-questions-before-the-title-is-added-things-that-have-no-title-ever-such-as-euro-scrutin). Or at least the things that turn up in [Solr](https://solr.apache.org/) with no title. Some things having no title at source, being subjected to the indignity of having fake titles applied somewhere in the pipes. Quite where this happens needing further investigation. Needless to say, it's all a bit of a mess.

In the absence of anyone else prepared to make a decision, Anya has also concluded that we [should not flag](https://trello.com/c/6HBB4VqT/107-information-for-prorogation-answers-to-written-questions) '[prorogation answers](https://ukparliament.github.io/ontologies/question-and-answer/question-and-answer-ontology#d4e238)' on our [written question and answer](https://api.parliament.uk/search-prototype/objects?object=http%3A%2F%2Fhansard.intranet.data.parliament.uk%2FLords%2F2012-12-10%2F1212106000156) pages. Prorogation answers crop up when a Member tables a question for written answer toward the end of a session. The [answering body](https://ukparliament.github.io/ontologies/question-and-answer/question-and-answer-ontology#d4e192) may decide that there is not enough time to provide a full answer, so instead responds with some boilerplate text to the effect that the egg-timer has run short of time. Our crack team of librarians flag such such answers, which is useful for filtering out the boilerplate, but the distinction isn't really 'procedural' so we won't be flagging it on our answer pages.

In templating news, Jon has added a couple of helpers to help present our data in a slightly better shape. First off, any and all use of pipes to separate items has now been [replaced with line breaks](https://api.parliament.uk/search-prototype/objects?object=http%3A%2F%2Fdata.parliament.uk%2Fimpactassessments%2F43918#related-items). Which is easier to look at and should also please screenreader users. He's also [removed parentheses](https://trello.com/c/IdqOnTNa/129-people-with-brackets) from Member names, which were there to disambiguate Members with the same name in the taxonomy, but looked a little odd in pixels.

## In the midst of life, we're in technical debt, [etcetera](https://www.youtube.com/watch?v=C6TbGPvqKM8&ab_channel=TheSmiths-Topic)

Most of the new, old search backend work now being complete, [our Jianhan](https://twitter.com/jianhanzhu) has turned his attentions to upgrading our taxonomy management software and accompanying API. A job that sounds simple. At least on paper. And a job that is not so simple in reality.

We knew we had two APIs, an internal one and a redacted external one. "A redacted taxonomy?" our dear reader may well exclaim. "That doesn't sound at all right. What could they possibly wish to redact from a humble taxonomy?" Well. It turns out that when our antiquated search service got built, a number of other systems were built as part of the same project. Amongst them, the application used to upload [Library Research Briefings](https://researchbriefings.parliament.uk/) and the application to handle [deposited papers](https://depositedpapers.parliament.uk/). Unfortunately for all concerned, that project ran out of both time and money before all promised features could be delivered. As projects tend to do. One feature that failed to be delivered was application authentication. Now, one cannot have every Tom, Dick or Harriet uploading briefings and depositing papers, so someone - we know not who - took the decision to encode authentication credentials - staff names, email addresses and telephone numbers in our poor taxonomy. Sighs. We do not suppose this is the first time a boat has been spoiled for a ha'porth of tar, and we do not suppose it will be the last. But, by god, the work that decision has resulted in. A curse upon preceding computation "experts" indeed. And indeed their project managers.

One preceding computational expert we will never curse is Joe, whose helping hands are inexhaustible. Jianhan and [Michael](https://bsky.app/profile/fantasticlife.bsky.social) had the unexpected pleasure of spending an hour on Wednesday pushing around dependency-pixels with the lad. At which point, it turned out we have more dependencies than even Jianhan had realised. Dependencies longer than our arms it would seem. Not only is there an internal API and an external API, there's also a "simplified" internal API called something like the "indexing API"; an API that isn't used by the indexing application. Obviously. And also isn't simple, taking some form of feed from the [triplestore](https://en.wikipedia.org/wiki/Triplestore). News that caused all concerned to wince.

Not wanting to get blindsided by more unexpected taxonomy usage, Librarian Ned has done the legwork to [compile a list](https://trello.com/c/b0gcP69A/110-document-all-the-ways-we-use-ontology-manager) of all the ways in which we use our taxonomy system. Some more unusual than others, but none so unusual as an authentication system. Luckily.

All that said, the week has not been all bad news. Far from it. Our Jianhan has managed to [install the current version](https://trello.com/c/OBjXDFMw/119-set-up-new-ontology-manager) of our taxonomy management software, export all the data from the none too recent version we've been running - think Visual Basic but possibly uglier - and [load all of that data](https://trello.com/c/OBjXDFMw/119-set-up-new-ontology-manager)  - even the weird stuff - into the upgraded version. Which gives our crack team of librarians some source of comfort. Top work, as ever, Jianhan.

## How's poor Robert?

It's hard to say to be honest. He has the thousand yard stare of a man who's fresh from the pixel trenches, having just put the finishing touches to his TD search MVP HLD. All ably assisted by PM Lydia. Quite the achievement for the pair of them. As far as we understand, the next steps involve taking the HLD to the TWG and - should they decide not to shred it - it's on to the TDA. In normal circumstances we would never trouble our dear read with any acronym that was not expanded. In this case, god only knows. We'll lost all track.  

## People, places, parties

In breaking [psephology](https://api.parliament.uk/psephology) news, there's not been much in the way of new [code](https://github.com/ukparliament/search-prototype) this week. But that shouldn't really come as much of a surprise. As we've always said, given a [decent data model](https://api.parliament.uk/psephology/meta/schema) and a well thought through information management policy, websites kinda build themselves. It is, in many ways, our mantra.

That said, we now have much a much improved layouts for [majorities](https://api.parliament.uk/psephology/boundary-sets/2/majority) and [turnouts](https://api.parliament.uk/psephology/boundary-sets/2/turnout) under our [boundary set pages](https://api.parliament.uk/psephology/boundary-sets/2/). Not to mention considerably faster response times. We've also added new views for [winning candidate vote shares](https://api.parliament.uk/psephology/boundary-sets/2/vote-share) and listings of [party performances at boundary set level](https://api.parliament.uk/psephology/boundary-sets/2/parties). No idea how we managed to forget those, but none of us are as young as we used to be. We've also added links to [party pages](https://api.parliament.uk/psephology/political-parties/parliamentary) wherever a party is mentioned and links to [Member pages](https://api.parliament.uk/psephology/members) wherever a Member is mentioned. Because of course we have. If there's one thing we're reliably good at, it's using hypertext.

In more exciting news, Librarian Ned has continued to expand our coverage of [boundary set setting legislation](https://api.parliament.uk/psephology/legislation-items), meaning we're now good back to 1918. Excellent stuff.

In even more exciting news, statistician Carl has been applying his well-honed computational techniques to our boundary set / constituency area problem. Explaining that the same geographic area with the same name or - even more tricky - that an ever so slightly different geographic area with the same name, or some combination thereof, are, in fact, different things, is a perennial bugbear in attempting to explain parliamentary elections to the slightly disinterested. God knows, it's baffled us and we're paid to be interested. Carl's math skills have been applied to [analysing current constituency boundaries against proposed constituency boundaries](https://constituency-genealogy-3ba44d94c29a.herokuapp.com/psephology/constituency-area-overlaps), returning actual figures for overlaps geographic, household and population in nature. Wow.

Off the back of which, we've [cloned our psephology application](https://constituency-genealogy-3ba44d94c29a.herokuapp.com/psephology), made a pretend dissolution, a [pretend Order in Council](https://constituency-genealogy-3ba44d94c29a.herokuapp.com/psephology/legislation-items/fake), loaded the [proposed new constituencies](https://constituency-genealogy-3ba44d94c29a.herokuapp.com/psephology/constituency-areas/current) and [started to expose the data](https://constituency-genealogy-3ba44d94c29a.herokuapp.com/psephology/constituency-areas/1137/overlaps). No longer will the genealogy of Runnymede and Weybridge be a mystery, not even when it starts to colonise bits of Esher. More user friendly views coming soon, one hopes.

It is at this point, we dive back into the purpose of the work. Being modellers of real world things - albeit being trapped in the medium of 'data' - none of this work would add up to much if we couldn't encapsulate it in models. To that end, Ned, [Young Robert](https://bsky.app/profile/robertbrook.bsky.social) and Michael have all headed back into [ontology land](https://ukparliament.github.io/ontologies/), to capture everything that Carl and Neil have taught us in a more Turtle shaped form. Changes to the [geographic area model](https://ukparliament.github.io/ontologies/geographic-area/geographic-area-ontology) have already been made, changes to the [election model](https://ukparliament.github.io/ontologies/election/election-ontology) are proposed, and - unless we find a better home for it - a new constituency area genealogy model would appear to be on the horizon. Because one does not make ontologies by sitting in a darkened room with a copy of [Protégé](https://en.wikipedia.org/wiki/Prot%C3%A9g%C3%A9_(software)), one makes ontologies by chatting to people and using some combination of code and data to prod one's understanding. At least, that's what we think.

## Assessing impacts

Amongst the many and varied types of document our crack team of librarians index and interlink are [Impact Assessments](https://en.wikipedia.org/wiki/Impact_assessment). For which some background might be considered necessary. Whenever the Government make changes to policy or legislation, they examine the effects the changes will have on public bodies, the private sector and the third sector. The result is an Impact Assessment. Such documents may be made available to Parliament as deposited papers or [laid](https://ukparliament.github.io/ontologies/laying/laying-ontology) together with statutory instruments or they may form part of another document laid before Parliament. For bills, they are placed with the Public Bill Office and published to the [bills website](https://bills.parliament.uk/). At least in theory, our librarians [index](https://api.parliament.uk/search-prototype/objects?object=http%3A%2F%2Fdata.parliament.uk%2Fimpactassessments%2F43918#subjects) all of them.

This has never been a process without problems. Or issues, as we say in these parts. First off, notifications have been noticeably lacking with email alerts being less than reliable. Second off - and we'd be the last people to ever criticise government - but they do seem to lack a titling style guide. The official titles of impact assessments being what one might charitably describe as "all over place". Third off, for reasons no one can quite remember - but perhaps because IAs were once physically filed somewhere in the Library - we appear to have instituted our own numbering system and completely ignored the reference numbers supplied. Fourth off, we've often treated the arrival of IAs as bundles of documents rather than creating a record per IA. Fifth off, publication dates for IAs are less than clear, not all IAs having one. A problem made worse by the aforementioned bundling problem. Sixth off, our bundling approach meant we couldn't link out to the actual document but only to somewhere roughly nearby.

Now, thanks to diligent librarianship by Librarians Deanne, Jason and Steve, we think we've solved the problems. Or most of them. The notification problem is largely solved by our shiny new [bill papers application](https://api.parliament.uk/bill-papers), which churns out [RSS feeds for bill-adjacent paper types](https://api.parliament.uk/bill-papers/publication-types/36). We've now plugged these feeds into our mailboxes and are on the receiving end of an email every time an IA is uploaded to the bills website.

We've also instituted a new titling policy prioritising accuracy over consistency. We are, after all, not the authors. Should the authors choose an inconsistent titling policy, who are we to quibble. Henceforth, if there is no title either on the cover sheet or in the title field of the template, then a title will be created in the format [Bill title]: [Impact assessment]. Otherwise, the title supplied will be used. However messy.

Having checked with Librarians Corie and Andrew, we've come to the conclusion that our previous policy of assigning numbers to IAs was a pointless exercise, these numbers being used nowhere else in the Library. From here on in, we'll instead use the identifiers supplied with the documents. At least, where possible, given they don't appear to be consistently applied.

Perhaps the biggest change is to our bundling regime. IAs will no longer be treated as a bundle, but rather as individual records. Which means we have a long and laborious task to unbundle a great many IAs published during previous sessions and create a new record for each one with a proper link to the thing and a date reflecting when the IA was made available to Parliament. Best of luck with that Deanne, Jason and Steve.

## Facts / figures

A wee while back, our crack team of librarians took over publishing duties for the [House of Commons Library's facts and figures series](https://www.parliament.uk/business/publications/research/parliament-facts-and-figures/). This week represents a breakthrough as [Librarian Phil](https://bsky.app/profile/philbgorman.bsky.social)'s first Parliamentary Facts and Figures publication rolled off the production line. This one covering [Government Chief Whips and Deputy Whips since 1945](Government Chief Whips and Deputy Whips since 1945). Read and enjoy.

Librarian Claire has also made an update to our PFF on the subject of [addresses to Members of both Houses of Parliament](https://commonslibrary.parliament.uk/research-briefings/sn04092/), which now includes the [recent address by the President of the Republic of Korea](https://www.parliament.uk/business/news/2023/november-2023/president-of-the-republic-of-korea-addresses-parliament/). Churning out new and improved spreadsheets is one thing, keeping them up to date, quite another. Top work, Librarian Claire.

## Bots to blue skies

We're delighted to report that our project to port bot accounts to Bluesky continues to gather pace. This week we welcome  ten - count 'em - new accounts, providing updates whenever an answering body provides a written answer to a parliamentary question:

* The Attorney General's Office can be found at [@‌ag-answers](https://bsky.app/profile/ag-answers.bsky.social)
 
* The Cabinet Office [@‌co-answers](https://bsky.app/profile/co-answers.bsky.social)

* The Department of Health and Social Care [@‌dhsc-answers](https://bsky.app/profile/dhsc-answers.bsky.social)

* The Department for Energy Security and Net Zero [@‌desnz-answers](https://bsky.app/profile/desnz-answers.bsky.social)

* The Home Office [@‌ho-answers](https://bsky.app/profile/ho-answers.bsky.social)

* The Ministry of Defence [@‌mod-answers](https://bsky.app/profile/mod-answers.bsky.social)

* The Ministry of Justice [@‌moj-answers](https://bsky.app/profile/moj-answers.bsky.social)

* The Northern Ireland Office [@nio-answers](https://bsky.app/profile/nio-answers.bsky.social)

* The Office of the Secretary of State for Scotland  [@‌so-answers](https://bsky.app/profile/so-answers.bsky.social)

* The Office of the Secretary of State for Wales [@wo-answers](https://bsky.app/profile/wo-answers.bsky.social)

Given access to Bluesky is still by invite only, and given we're not exactly drowning in invitation codes, should you have any spares you'd like to donate to a good cause, please do get in touch. [Librarian Anna](https://twitter.com/anna_buck) will more than thank you.