# 2021 - Week 6

## Short / sweet

It's been another long week. The work has been productive if a little dull. By this stage of lockdown life, we're all quite tired. Verging on the miserable. So let's try to keep this short and to the point. For once.

## Logicifying the procedure model

Librarian Jayne and computational "expert" [Michael](https://twitter.com/fantasticlife) spent a dreadfully dull week adding the final touches to their [remapping](https://trello.com/c/XkHLVd0P/13-remap-draft-negative) of the newly [logicified draft negative statutory instrument procedure map](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/draft-negative.pdf) before [decanting all the routes](https://trello.com/c/FqYcItxC/19-enter-draft-negative-routes-to-staging) into the machines. Endless hours of Michael reading out step labels and poor Jayne typing. The only shadow of amusement being the occasional childlike snigger and blush when they hit upon a step label with vaguely smutty connotations. That said, help from the ever reliable [Jianhan](https://twitter.com/jianhanzhu) made their lives almost bearable. In past outings, they've been forced to remove all non-logical routes before embarking on the addition of logical ones. This time round, Jayne hit upon the smart idea of asking Jianhan to politely ask the machines to have rid of these pesky routes. Which [he duly did](https://trello.com/c/479uQQ8y/79-delete-old-routes). In about a tenth of the time it would have taken mere humans. Thanks Jianhan.

Help was also forthcoming in the form of Jianhan's trusty step checker code. It loops through all the [routes](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e164) in a [procedure](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e153), gets all their source and target [steps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e175), checks they have the [expected number of inputs and outputs](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#validating-inputs-and-outputs-to-steps) and emails the results. From very sketchy memory the made negative map took about five runs of the checker script before all the [ANDs](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#truth-table-and) and [ORs](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#truth-table-or) had two inputs and one output, all the [NOTs](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#truth-table-not) and [decision steps](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#truth-table-decision) had one input and one output and all the business steps had one input and as many outputs as they felt necessary. This time around the email reported no errors on its third pass. So we think we're improving. Slowly. All this drudgery was not without rewards. By the end of Friday, we asked the machines to draw [their version of the draft negative procedure and this is what the came up with](draft-negative.png). Clever machines.

In drafting the draft negative map, Jayne and Michael realised that revocation in the [made negative map](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/made-negative.pdf) should have been precluding things that they'd forgotten to preclude. So they also went back and added a sprinkling of ANDs and NOTs and [that too is now sorted](https://trello.com/c/0a2P1RGU/77-made-negative-look-at-revocation-preclusions-generally).

They also clocked that some steps are a promise to the future and [would not need to be mapped](https://trello.com/c/38ldBlOA/78-instrument-can-be-made-signed-into-law) if the website exposed just a little of the [cone of potential futures](https://medium.com/building-the-agile-business/possible-futures-1e91eecdcb08). Until that happens, we're left with steps that are logically unnecessary but currently demanded. So [Anya](https://twitter.com/bitten_), Young Robert and Michael have [added another note](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#why-are-some-steps-redundant) to our rapidly expanding design notes to capture why they're there and why we'd like to get rid of them.

## Map parsing

Last week we reported we thought we'd finally cracked the procedure map parsing code. We were, of course, quite wrong. By bedtime, Michael had realised that Anya's requirement to distinguish between things that could not yet happen and things that could not now happen added a level of complication that he had not fully clocked. So on Wednesday morning, Young Robert and Michael took another stab at solving the problem and emerged quite satisfied that this time it was all ironed out. A feeling that persisted until Wednesday afternoon when Michael realised the code would not make it past the first route. The problem was later explained by Robert who declared around bedtime that our maps were in fact non-[Eulerian](https://en.wikipedia.org/wiki/Eulerian_path), being impossible to traverse by only visiting one edge once. A realisation you'd hope he might have had sooner. The problem is most apparent in our new solution to self-preclusion which usually states that thing X having happened AND thing Y NOT having happened, thing Y will now happen. Which creates a cyclic triangle where one cannot parse the route to Y without first parsing the route from Y. All enough to make anyone cry. So Anya, Robert and Michael sharpened their tiny chisels and once more [hacked apart our pseudocode to separate out the parsed attribute of a route from the value attribute of a route](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/parsing/step-types/). That was Friday. It's now Saturday. No one has yet thought of a reason why our two - successful - pass parsing won't work. But give it time. That said, our current approach lacks nuance and is very much reliant on brute force. We *think we think* the maximum number of parse passes grows as the square of the number of routes in the procedure. Though even that maths is beyond us, it is clearly less than ideal. At some point, Robert and Michael intend to start all over again with a much more efficient, more [Samu](https://twitter.com/langsamu)-like approach. But that might have to wait a for a week. Or two.

Your correspondents must confess they do not know [the collective noun for a group of librarians](https://www.researchgate.net/publication/331539810_What_is_the_Collective_Noun_for_a_Group_of_Librarians). But let's go with collection for now. On Friday a collection of librarians - numbering Anya, Jayne, [Claire](https://twitter.com/tinysprite), Emma, [Ayesha](https://twitter.com/askalibrarylady) and Martin - met with Jianhan, Robert and Michael to review work on the [work package](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e222) maps to date. They are not yet, in all fairness, the prettiest of things, being more than a little information dense. But they do do their job and give our librarians a better sense of the future possibility space than anything the clerks have to hand. It was generally decided that sometimes one needs a map and sometimes one needs a sat nav. And these two needs do not preclude each other. Accepting that no view is perfect led those assembled to agree that starting with all the information to hand and allowing users to filter out any noise they felt unnecessary was by far the best approach. In the finest traditions of [progressive disclosure](https://en.wikipedia.org/wiki/Progressive_disclosure), we hope to persuade Robert to prototype a more toggle-able approach to detail that will hopefully make everyone happy.

## Enabling enabling Acts

As we may well have mentioned [last week](https://ukparliament.github.io/ontologies/meta/weeknotes/2021/05/), we had thought we'd seen the last of [proposed negative statutory instruments](https://www.parliament.uk/site-information/glossary/proposed-negative-statutory-instrument/). They [first surfaced in the European Union (Withdrawal) Act 2018](https://www.legislation.gov.uk/ukpga/2018/16/schedule/7/enacted#schedule-7-paragraph-17) and have now [raised their heads again in the European Union Future Relationship Act 2020](https://www.legislation.gov.uk/ukpga/2020/29/enacted#schedule-5-paragraph-8). JO Jane is keen to have the [SI website](https://statutoryinstruments.parliament.uk/) differentiate between PNSIs enabled by the Withdrawal Act and PNSIs enabled by the Future Relationship Act. But our [legislation model](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html) was a little finickity and way too complicated to allow such links to be made. Following last week's chat with [John](https://twitter.com/johnlsheridan), [Matthew](https://twitter.com/matthewj_bell) and [Catherine](https://twitter.com/CathTabone), Anya, Jayne, Robert and Michael have now removed some of the cruft around [duties](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e229) toward Parliament - which was always a little more hoped for than achievable - and added [a new property](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e301) linking [statutory enabled things](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e147) to the [Act or Acts](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e125) that enable them. An email documenting these changes has winged its way to our friends at [TNA](https://www.nationalarchives.gov.uk/) and we hope to have [our homework](https://trello.com/c/rln8b85t/359-rewrite-legislation-model-to-reflected-js-chat) marked in the not too distant future.

In the meantime, we have started to list out the work needed at our end to enable our crack team of librarians to add enabling Acts to PNSIs. And indeed SIs. There is a [new list on the left of our Trello board](https://trello.com/b/nBCRWUdD/procedure-logic-gates) setting out everything we think we need to complete before our colleagues in Software Engineering can do their bit. Most tasks falling firmly on the plate of our Jianhan. Michael took time out of his busy schedule to add a couple of new tables to the [ERD](https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model) of our [procedure editor database](https://github.com/ukparliament/ontologies/blob/master/procedure/meta/editor/schema.pdf) in a gesture of solidarity with the poor lad. He felt it was the least he could do.

## Kind hearts and coronets

In other news, our quest to understand peers and peerages continued. On Monday, Michael met Librarian Ned and an attempt was made to [list our outstanding questions](http://peerages.herokuapp.com/meta/about#questions). Michael has since made a couple of tidies to [the application](http://peerages.herokuapp.com/) we've built on top of [David](https://twitter.com/clerkly)'s data and it's starting to look reasonable. We still have need to better understand the relationship between letters patent and subsidiary peerages but luckily [Ben](https://twitter.com/clerklyhttps://twitter.com/benwoodhams) has supplied us with an introduction to a chap from the [College of Arms](https://www.college-of-arms.gov.uk/). So we hope to be able to make more progress soon.




