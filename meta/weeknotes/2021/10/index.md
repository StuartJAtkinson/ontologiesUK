# 2021 - Week 10

## Indexing petitions

[Anya](https://twitter.com/bitten_), [Jianhan](https://twitter.com/jianhanzhu), young Robert and bits of borrowed Ian have spent much of the past week investigating how we might ingest petition data into systems that allow our team of crack librarians to subject index and link them to pertinent parliamentary business. There has been a long standing desire from the [Petitions Committee](https://committees.parliament.uk/committee/326/petitions-committee/) to have the petitions better described in data and this is one step on the road to that. 

Whilst the [petitions website](https://petition.parliament.uk/) is served from the Parliament domain, it's built and maintained by our friends at the [Gubmint Computational Section](https://www.gov.uk/government/organisations/government-digital-service). So the mechanics were something of a mystery to us. A long while back, in a time far away, we had begun the process of ingesting the website [JSON feed](https://petition.parliament.uk/petitions.json) into the [data platform](https://api.parliament.uk/). So Jianhan and Robert have been picking their way through data and code, writing a [couple](https://petitionresponses.herokuapp.com/petition) of [applications](https://petitions-db.herokuapp.com/) and trying to make the numbers add up. It would appear that there are petitions that appear on the website and have been shunted into the data platform that are no longer present in the feeds. [Archived](https://petition.parliament.uk/archived/petitions) or otherwise. A meeting with GDS has been pencilled in to explore why that might be. Jianhan has also taken the opportunity to fix a number of bugs he found in the data platform [orchestration](https://github.com/ukparliament/Orchestration/tree/master/LogicApps/EPetition code). So we think we now have a pretty complete, well-[modelled](https://ukparliament.github.io/ontologies/petition/petition-ontology.html) and fairly well-populated set of petition data. If not perfect.

The next step was slurping it back out of the data platform and into search and indexing, where our librarians can get at it. Jianhan spent much of last weekend building an [Atom feed](https://petition-feed.azurewebsites.net/petition) that picks data out of the platform and sends it toward the search and indexing harvestor application. Which is probably beyond the call of duty, but, let's face it, there's not much else to do. With welcome support from Sadia and Kunal, he's now configured the harvestor to turn the feed back into triples and insert them into triple store number two. So far we've only pushed five test petitions down that pipe, but they all seem to be turning up as expected. More progress next week we hope.

## Logicifying the procedure maps

Following [last week's revelation](https://ukparliament.github.io/ontologies/meta/weeknotes/2021/09/#logicifying-the-procedure-maps) from JO Jane that statutory instruments pertaining to money matters accidentally laid before the House of Lords, are not in fact withdrawn but expunged from memory, Librarian Jayne and [Michael](https://twitter.com/fantasticlife) had work to do. Encounters with clerks usually leave us leaving the room with a feeling that everything procedural is more complicated than our naive minds could possibly have imagined. So finding something that's actually simpler than initial impressions makes a very pleasant change. It is our usual practice, when mapping procedures, to start at a step and plot out what might happen next. But toward the end of any procedure, working backwards is the only reasonable response. One can almost hear [Silver](https://twitter.com/silveroliver) whispering about [event storming](https://en.wikipedia.org/wiki/Event_storming) at this point. We have a number of steps describing both the conclusion of a procedure and what might or must happen to the instrument next. And picking apart how you might get there is like knitting a jumper by first unravelling a scarf.

All of this led to Jayne and Michael spending a number of hours unpicking maps they'd mapped and, for once, simplifying the frankly horrendous knots of NOT steps, AND steps, OR steps and routes which, at the start of the week, looked like a cat had attempted knitting. On Thursday, they dragged young Robert into the fray who was generally positive but did point out a couple of optimisations they'd missed. Clever clogs. The logical [draft negative](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/draft-negative.pdf), [made negative](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/made-negative.pdf) and [draft affirmative](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/draft-affirmative.pdf) maps are now redrawn and the new data has entered the machines. We are confident that all our logically mapped procedures [now conclude appropriately](https://trello.com/c/2gkdPSZ5/102-check-sis-for-procedure-conclusions). At least for this week.

## Componentising the logical procedure maps

A wee while back, Michael was staring at the [procedure editor database schema](https://github.com/ukparliament/ontologies/blob/master/procedure/meta/editor/schema.pdf) and was surprised to find a join table between [procedures](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e153) and [routes](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e164). Now usually Michael is a big fan of join tables. A [big fan](https://twitter.com/fantasticlife/status/1308838650323623937). But on this occasion, he found himself confused at how this had ever got there. That a procedure might have many routes was never in question. That a route might be in many procedures was more puzzling. Checking our [model comments](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e380), all became clear. We had, it appears, always intended to reuse routes across maps, thereby defining procedural components that could be described once and used repeatedly. Like reference data, if you will.

Monday saw Librarians Anya and Jayne and computational experts Robert and Michael sit down for [a chat over shared pixels](https://trello.com/c/r4Crgf7e/361-can-routes-be-in-many-procedures). Michael went into the meeting thinking they had perhaps overreached on this matter and that no one could ever be expected to get their heads around maps with shared routes. He left the meeting with the realisation that our past selves had in fact presented our present selves with a procedural present. There being a number of maps where we had been copying and pasting chunks of procedure wholesale, with the data for these chunk being managed four, five or even six times. The presence of that blessed join table allows us to split out these components, describe them once and reuse everywhere.

So by Thursday we had maps of component procedures for [EVEL certification](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/components/evel-certification/evel-certification.pdf), the [Select Committee on Statutory Instruments](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/components/scsi/scsi.pdf), the [Joint Committee on Statutory Instruments](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/components/jcsi/jcsi.pdf) and the [Secondary Legislation Scrutiny Committee](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/components/slsc/slsc.pdf). And by Friday, Jayne and Michael ensured our data had [a single map of the SLSC procedure reused across four different procedures](https://trello.com/c/sWa7Zl8u/113-componentise-slsc). The machines even being kind enough to [draw it for us](https://ukparliament.github.io/ontologies/meta/weeknotes/2021/10/slsc.pdf). Thanks machines.

## Citing Acts

Librarian Jayne had noticed that a couple of our procedural steps made mention of legislation without properly citing it. Which is not like us. Not like us at all. Jayne has now fixed this. So for steps [actualised](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e319) by [instruments introducing one - or indeed more - criminal offences](https://trello.com/c/PqtCLGUU/367-instruments-introducing-one-or-more-criminal-offences), we now properly cite [Schedule 7 of the European Union (Withdrawal) Act 2018](https://www.legislation.gov.uk/ukpga/2018/16/schedule/7). And for instruments made under the [Sanctions and Anti-money Laundering Act](https://trello.com/c/RDb4lGAR/366-made-affirmative-instruments-made-under-the-sanctions-and-anti-money-laundering-act), we now properly cite [Section 56(5) of the
Sanctions and Antimoney Laundering Act 2018](https://www.legislation.gov.uk/ukpga/2018/13/section/56#section-56-5). Top work Jayne.

## Schr√∂dinger motions

For those unfamiliar with statutory instrument procedure - and let's face it, that's probably most of us - there are two common types. In the [affirmative procedure](https://www.parliament.uk/site-information/glossary/affirmative-procedure/), the government must table an approval motion which must be approved before the instrument can either become law - in the case of a draft, or remain law - in the case of an instrument that's already been made into law. In the [negative procedure](https://www.parliament.uk/site-information/glossary/negative-procedure/), the instrument will automatically become or remain law when the [egg timer](https://parliament-calendar.herokuapp.com/) of scrutiny runs dry of sand, unless either House approves a motion rejecting it.

In the House of Commons, such rejection motions are tabled as [Early Day Motions](https://edm.parliament.uk/) - more usually the preserve of Members congratulating football teams. Now there are two types of motion that might be tabled as EDMs. The passing of a fatal motions kills the instrument, as above. The passing of a non-fatal motion does not kill the instrument but presents an opportunity for Members to make their views known.

Occasionally EDMs are tabled as fatal motions but do not get an opportunity to be debated until the sand is at the bottom of the egg timer. At which point the opportunity to kill the instrument has passed. Which means a fatal motion can no longer be decided upon.

Anya had noticed that sometimes, we were capturing the tabling of a fatal EDM and the debate and decision on something that looked very like that EDM, past the point where a fatal motion could have any effect. Which was [puzzling](https://trello.com/c/BgV8ZVD0/360-pe-mh-ps-edm-fatals-becoming-non-fatals). So on Monday, Anya, Jayne and Michael sat down with Mr Hennessey from the House of Commons Journal Office to try and figure out what they were missing. It turns out that EDMs tabled as fatals do not get withdrawn once the period of fatality has expired. And that Members might table a similarly worded non-fatal EDM or table a non-fatal, non-EDM type motion that first pops up on the [Order Paper](https://commonsbusiness.parliament.uk/document/46017/html). And in the latter case, our librarians had not always been spotting these. We now hope to get a warning whenever a non-fatal motion hits the Order Paper which should lessen the confusion considerably. Thanks Mike.

## On the meaning of time and the nature of egg timing

All but one of our [procedure maps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#maps) involve some kind of scrutiny period, as defined in legislation. The legislation defines which [type of day](https://parliament-calendar.herokuapp.com/date.rb.html) to start counting from, which kind of days to count and how many days of that type should be counted - weeknotes passim and then some. We've had a couple of long standing questions about these clocks, roughly summed up as does the clock not having started preclude Parliament from acting, and if and when we should ever reset the clock end step.

After consulting with lawyers and clerks far and wide, we have arrived at the conclusion that clocks not having kicked off does not preclude anything. So Jayne and Michael have now removed all clock start steps from all procedure maps and data - both logical and non-logical - and our Jianhan has also removed the code that actualised the clock start steps. Thereby reducing both noise and effort. Thanks for helping us to answer that question go to [Alex](https://twitter.com/AlexanderHorne1), [John](https://twitter.com/johnlsheridan) and [Luke](https://twitter.com/Lenorbury). We cannot promise we will not have more questions in the future.

The question of resetting clock end steps is still a little up in the air, so we'll save that as a treat for next week. Do tune in if you can.

## Kind hearts / Coronets

Librarian Ned and Michael have continued to chip away at [David](https://twitter.com/clerkly)'s [peerage data](https://api.parliament.uk/peerages/) in the hope of turning it into a shape that can also cope with subsequent holders of a title. To that end, Ned has started to compile lists of subsequent peerage holders which Michael has now ingested into the database. The [Barony of Blythswood](https://api.parliament.uk/peerages/peerages/542) being one such delightful example. This week they've also been trying to generate [ordered lists of letters patent](https://api.parliament.uk/peerages/letters-patent). Results so far, being mixed. The ordering is still not quite right and the code is quite dreadfully slow. But they hope with a dab of downcasing they can fix the former and more efficient queries should definitely help with the latter. They'd both like to thank Grant from the [College of Arms](https://www.college-of-arms.gov.uk/) for answering peerage questions both broad and specific.





