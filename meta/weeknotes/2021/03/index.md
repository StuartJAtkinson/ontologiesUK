# 2021 - Week 3

## Logicifying the procedure model

So Librarian Jayne and computational "expert" [Michael](https://twitter.com/fantasticlife) have had an awful week. A truly awful week. Redesigning the [procedure maps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#maps) into their newly logical state is a challenge. A brain tease. One might even say fun. You can begin to see why fully grown people buy puzzle books. But transferring boxes and arrows into the machines is a lot less fun. Especially over a wonky Teams connection that sounds not unlike a radio transmitter in a Second World War film. Set on a submarine. "ANYA SOMERVILLE AND to AUDREY JEAN DECISION", shouted Michael. "JEAN?" shouted back Jayne. "YES, JEAN. OR JOAN. IT DOESN'T MATTER," screamed Michael. And that is how their week progressed. In meeting after endless meeting. Michael has vague memories of drinks with [our Samu](https://twitter.com/langsamu), over the course of which Samu suggested we might build a map making machine that would also serve as a means to enter data. All at the same time. How we wish such a thing existed.

Nevertheless, Jayne and Michael ploughed on and, by Friday, all the routes for the [logical made negative statutory instrument procedure](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/made-negative.pdf) were safely inside the machines. Or at least they thought they were. A wee while back, [our Jianhan](https://twitter.com/jianhanzhu) built a nifty little link checker to validate that [the number of inputs and outputs to various steps types was as expected](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#validating-inputs-and-outputs-to-steps). Since Friday morning, it has been reliably reporting nine errors, from NOT gates with two inputs to AND gates with zero outputs. Jayne and Michael continue to hope they mistook a CRISSY for a KELLY and that all nine are errors of transcription and not errors of logic. But that's a problem for next week.

The week had not gotten off to the best of starts. Jayne and Michael realised that their plans to treat logic and decision steps as [agnostic of usage in assorted maps](https://trello.com/c/5THGhk4Y/56-how-coupled-are-non-business-steps-to-procedures) had been undermined by their assigning of Houses to such steps in the [proposed negative SI map](https://ukparliament.github.io/ontologies/procedure/flowcharts/proposed-negative-sis/logic-gates/proposed-negative-sis.pdf). And would be further undermined by the their plan to cite legislation and standing orders from such steps. The citations being somewhat dependent on the procedure in question. So early Monday morning, they dragged young Robert into the fray to chat once more about how to label steps, whether they should be House specific and how they'd hang procedure specific, step specific citations off any of this. [A new approach](https://trello.com/c/D5qQJbwJ/58-add-citation-to-procedure-model) was clearly needed and on Tuesday, Robert and Michael sat back down with the [procedure model](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html) and made changes. A new [citation class](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e269) has been added and it's all worked out rather well. They were loath to add to the model merely to allow for friendlier step labelling, but the new model allows us to cite sources from a [procedure](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e153), from a [step](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e175) in a procedure and from a step regardless of procedure. All really rather nice.

Monday also saw a catch up meeting between librarians [Anya](https://twitter.com/bitten_) and Jayne, computational "experts" Robert and Michael and actual computational expert Jianhan. We'd had some worries about what happens if and when the code goes live and how much librarian time we'd need to get all the route data for all six procedures into the machines. Anya expressing a degree of disquiet at the prospect of losing Jayne for a fortnight and the possibility of being locked out of making any changes in live until all that work was done. A new plan was hatched to enter all data into staging and rely on Jianhan's computer wizardry to migrate from staging to live when the time was right. Which opened up a whole other can of worms when all assembled realised that changes had been made to both live and staging since we last synched the data. And that the result was ID clashes in staging to live and in live to staging. Auto-incrementing IDs being all very handy until the point they are not. Jayne and Michael took to admin interfaces in staging and live and within the course of a few hours performed a data [comb over](https://en.wikipedia.org/wiki/Comb_over) on both. Non-business steps are now [free of the taint of Houses](https://trello.com/c/IOnQ49iY/57-remove-house-from-non-business-steps), [data discrepancies documented](https://trello.com/c/s7WmakDF/68-document-any-business-step-changes-weve-made-in-live-since-2020-12-03) and bald patches of data we'd plucked out of live now [plastered down with hair and Brylcreem in staging](https://trello.com/c/dayoejFh/70-delete-business-steps-deleted-in-live-from-staging). Jianhan put the final touch to the new plan by [migrating new business steps from live to staging](https://trello.com/c/Lon3lSnx/69-copy-new-business-steps-from-live-to-staging-maintaining-data-platform-id) and new non-business steps from staging to live. Which means we are once more back in sync and able to respond to new requests from JO Jane with our usual alacrity. Phew. From now on, no steps get added or deleted in live where the same does not happen in staging. And vice versa. And both day and data were duly saved.

## Procedure mapping

All was quiet on the procedure front this week. Even the House of Lords lacked the inclination to think of a new way to do a thing. So Jayne put in some time finishing up the work of adding [legislation](https://trello.com/c/7lQp9Pbj/186-add-legislation-citation-blobs-on-procedures) and [standing order citations](https://trello.com/c/m0zvB2Bm/218-add-standing-citation-blob-on-procedures) to our non-logical procedure maps. All seven maps now come complete with little coloured blobs indicating where bits of procedure are informed by Acts of Parliament and standing orders. Which will all probably move around a bit as we switch from non-logical to logical maps. We've tended to find that citations which did sit on typed routes shift to logic gates in the new model. Which should not come as much of a surprise, given both legislation and standing orders tend to express conditionals.

## The problem with proposed negatives

Around the time the statutory instrument service went live, the [European Union (Withdrawal) Act 2018](https://www.legislation.gov.uk/ukpga/2018/16/contents/enacted) landed on our doorsteps. Complete with [the outline of a brand new procedure](https://www.legislation.gov.uk/ukpga/2018/16/schedule/7/enacted#schedule-7-paragraph-17), henceforth referred to as the proposed negative statutory instrument procedure. Or PNSI for short. Ministers intending to lay a certain subset of SIs under that Act - and intending to lay under a negative procedure - must first lay the instrument as a PNSI. At which point, a committee in each House would report if they thought it was fine as a negative - where Parliament must object - or should in fact be laid as an affirmative - where Parliament must approve. The instrument then being laid a second time under a standard SI procedure. We had thought we'd seen the last of the PNSIs. Or were at least close to seeing the last of them. But then the [European Union (Future Relationship) Act 2020](https://www.legislation.gov.uk/ukpga/2020/29/enacted) landed with a [section on a new procedure](https://www.legislation.gov.uk/ukpga/2020/29/enacted#schedule-5-paragraph-8) looking not unlike a copy and paste from the Withdrawal Act. We are, as yet, not quite sure if this is a new procedure - it looks to have an additional ministerial get out clause, the same procedure under a different Act, the same type of "paper" or an entirely new type of paper.

At some point on Wednesday, Michael decided to rest his eyes and woke in a cold sweat with the realisation that our [legislation model](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html) might be completely wrong. Certainly the wording feels wrong - a [PNSI](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e181) being declared a subclass of a [Statutory Enabled Thing](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e170) - when, in actuality, a PNSI cannot be enabled to do anything without first becoming an SI and passing through a standard SI procedure. Michael suspects that we should be treating the PSNI and SI papers as a single [Work Packageable Thing](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e233) with two [layings](https://ukparliament.github.io/ontologies/laying/laying-ontology.html#d4e106) resulting in two different [work packages](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e222) under two different [procedures](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e153). And not as two different work packageble things with a [preceded by](https://ukparliament.github.io/ontologies/legislation/legislation-ontology.html#d4e328) relationship. And that a touch of [FRBR](https://en.wikipedia.org/wiki/Functional_Requirements_for_Bibliographic_Records) might be required to patch over this problem. He also suspects we should have listened more intently to Mr Greenberg, who did patiently explain this to us. Oops. In the meantime an emergency conflab with Mssrs. [Tabone](https://twitter.com/CathTabone), [Sheridan](https://twitter.com/johnlsheridan) and [Bell](https://twitter.com/matthewj_bell) has been convened. In the hope they can clear up at least some of our confusion. 

## Modelling the R words

Some time back, Anya and Michael met with assorted Library types in an attempt to better understand [process flows around reviewing, revising and 'rchiving](https://trello.com/c/i2ZKCSuR/126-brarary-website-rb-app) the output of our [three](https://commonslibrary.parliament.uk/) [research](https://lordslibrary.parliament.uk/) [services](https://post.parliament.uk/). The [resulting model](https://ukparliament.github.io/ontologies/record-review/record-review-ontology.html) was drawn up some time back, but this week Robert and Michael made a couple of tidies, polished off the commenting and added it to our [Library Information Architecture page](https://ukparliament.github.io/ontologies/meta/library-information-architecture/). Feedback is, as ever, heartily encouraged.

## Sorting out search

Robert has continued to chisel away at the markup for [external Parliamentary Search](https://search-material.parliament.uk/). Jianhan has been kind enough to set him up with access to the code repository, meaning he can now chip away without fear of accidentally removing a limb. Or worse still a head. We hope to have something cleaner, faster and slightly more moderne to show in the next week or so.

## Linking open data - as we used to say

Monday afternoon saw the second in our new series of Wikidata meetings. Our [Google document](https://docs.google.com/document/d/1_MjxU_SKHPHvXa6mcFN0gOz6rRgO-kfKz9wD2tMH5RE/edit?usp=sharing) has been further fettled and is beginning to show the makings of a manual. More delightfully, the Wikidata community are starting to chip in and add comments. And more delightfully still, they're fixing problems in Wikidata faster than we can spot them. A couple of weeks back, Anya pointed out that the data around Ambulance Services and NHS Trusts was something of a can of worms. Since then, [Simon](https://twitter.com/Tagishsimon) has combined [our thesaurus data](https://explore.data.parliament.uk/?endpoint=terms) with SI data from [legislation.gov.uk](https://www.legislation.gov.uk/), added a dab of [Mix 'n' Match](https://mix-n-match.toolforge.org/#/) and [{{cite Q}}](https://www.wikidata.org/wiki/Template:Cite_Q), and sorted out the whole lot. Which is [enough to please any librarian](https://twitter.com/bitten_/status/1352532688008323072?s=20) or computational expert. We are, after all, nothing if not [native to a web of data](http://www.plasticbag.org/files/native/native_to_a_web_of_data.pdf).

## All about the collaboration

Anya and Michael had a second stab at documenting some of the issues with the reference data of the reference data of the [Rush data](https://membersafter1832.historyofparliamentonline.org/). The [Trello board](https://trello.com/b/4JA1hW6I/rush-data-2020) is filling up nicely and should provide a lucky librarian with enough work to keep them occupied for a month or three. Or until the other side of lockdown. Whichever comes first.

## In continuence of our limited education

This week did not afford many opportunities for learning. Or at least formal learning. We did learn a lot about the perils of auto-incrementing IDs for instance, but there is no recognised qualification for that. Next week should mark a step change in our engagement with the curriculum as Anya heads off to [learn all about Wikidata](http://wikiedu.org/wikidata/). She's spent the weekend clearing out her pencil case and sharpening her pencils to prepare for this much anticipated return to the classroom. Or at least the bits of the weekend when she's not been battling a quite brutal, Zoom induced hangover. Good luck Anya.





