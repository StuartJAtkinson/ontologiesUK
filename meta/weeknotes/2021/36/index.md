# 2021 - Week 36

## Our first enquiry

So, the first thing you need to know is the House of Commons Library - and indeed the House of Lords Library - is a research library. It's possible this is common knowledge. But looking in from the outside, at least one of your correspondents must confess he had no idea. The [photographs you tend to see](https://digitalarchive.parliament.uk/book/view?bookName=HC%20Library,%20Oriel%20room&catRef=HC%2FLB%2F1%2F111%2F6%2F3&mfstId=8ecec885-7c0e-4339-a6a8-9ceb66d29e57#page/n1/mode/1up) are of the Members' Library. Which makes some sense. It's all leather bound volumes on high shelves with curvy staircases and is definitely more picturesque than the bit we work in. And when you tell people you work in a library, this is the kind of thing they tend to imagine. But, as ever, the bits you can't see are as important as the bits you can.

Whilst the Government has the might of the Civil Service to collect the data, analyse the data and inform the debate, backbench Members tend to rely on a dribble of [Short Money](https://www.parliament.uk/site-information/glossary/short-money/?id=32625) to pay for staff and so on, and the research services provided by the Library. Not that our team of crack librarians work directly in the service of Members. We model and manage parliamentary data which goes inside the computers and provides a service to the Library researchers who, in turn, provide a research service to the Members. It is services all the way down.

The second thing you need to know is that said team of crack librarians have just taken over the management of data about Commons Members in our oddly named [Members' Names Information Service](https://data.parliament.uk/membersdataplatform/memberquery.aspx). Oddly named because their names are probably the least interesting data we manage. And with data management pleasures come enquiry handling duties. And last Tuesday, at lunchtime on the first day of summer no less, we had our first ever request from a researcher to help out with an enquiry from a Member. Because this is all rather new to us - and because we don't necessarily know all the assorted APIs, how they're constrained and how best to approach them - this threw even our highly trained librarians into something of a tailspin. Lunchtime in the park plans were abandoned and downed tools un-downed. By some combination of hook and crook we managed to get our heads around the [API](https://data.parliament.uk/membersdataplatform/memberquery.aspx) and pull an answer from the XML hat. And all within an hour. Possibly two. Go us!

The route to the answer took us through the [introductory guides](https://data.parliament.uk/membersdataplatform/memberquery.aspx#urlstructure) to the public MNIS API, whereupon we discovered [options to filter](https://data.parliament.uk/membersdataplatform/memberquery.aspx#searchcriteria) the result set and [options to include additional information](https://data.parliament.uk/membersdataplatform/memberquery.aspx#outputs) for each result returned. All - somewhat oddly - set out as slash URLs and not parameters. And - more oddly still - separated by pipes rather than the more traditional ampersands. Now, our eyes are not getting any younger. And trying to hack a URL bar with pipe separated values is not for the faint of eyes. Which led to [Michael](https://twitter.com/fantasticlife) spending most of the rest of the week wrapping a [web form](https://mnis-prodder.herokuapp.com/) around the API, parsing the results to [HTML](https://mnis-prodder.herokuapp.com/parse?filter=gender=M%7Chouse=commons%7Ciseligible=true%7Cparty=labour&include=) and pumping the XML to a handy third party service to [convert the results to CSV](https://codebeautify.org/xml-to-csv-converter?url=https://data.parliament.uk/membersdataplatform/services/mnis/members/query/gender=M%7Chouse=commons%7Ciseligible=true%7Cparty=labour//). Because, to be honest, who doesn't prefer a CSV to some XML? There is still work to do to add more filter parameters and more include parameters. The many and varied combinations of filter options and the manner in which they combine makes writing the form text rather tricky. What's there could definitely use an intervention from young Robert's tiny chisel. Another post-vacation job for him to look forward to. Once all that's done, we hope that future enquiries will be more easily handled, with our librarians not forced to squint at pipes and XML. Who knows, it may even be of use to other people.

## Fettling our SI maps

On more mundane matters, we also spent a wee while polishing our [statutory instrument maps](https://ukparliament.github.io/ontologies/procedure/maps/#statutory-instrument-procedures) and data. I mean, of course we did. What else would you expect us to be doing? Despite claiming completion last week, it would be naive of our reader to expect accuracy on such matters. We've shouted 'done' so many times the definition of 'done' may have slipped a little. This week, Librarian Jayne and Michael realised that, whilst they'd added a [summation step](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/with-step-types/#summation-steps) for revocation in both our [made negative](https://ukparliament.github.io/ontologies/procedure/maps/secondary-legislation/statutory-instruments/negative-procedures/made/made-negative.pdf) and [made affirmative](https://ukparliament.github.io/ontologies/procedure/maps/secondary-legislation/statutory-instruments/affirmative-procedures/made/made-affirmative.pdf) procedures, they'd forgotten to make use of it in the Commons. That is now [fixed](https://trello.com/c/eLcLYOQq/189-revocation-summation-has-it-been-used-for-the-commons). 

In a similar vein, they also realised that they'd forgotten to add a summation step for withdrawal from the Commons in our [draft negative](https://ukparliament.github.io/ontologies/procedure/maps/secondary-legislation/statutory-instruments/negative-procedures/draft/draft-negative.pdf) and [draft affirmative](https://ukparliament.github.io/ontologies/procedure/maps/secondary-legislation/statutory-instruments/affirmative-procedures/draft/draft-affirmative.pdf) maps. Which made everything noisier than necessary. That is also [fixed](https://trello.com/c/9qNJ55DG/188-add-summation-step-to-commons-withdrawn-in-draft).

Finally, more noise was cancelled in our [CRaG treaty procedure](https://ukparliament.github.io/ontologies/procedure/maps/crag-treaties/crag-treaties.pdf) as our component [Lords' Committee map](https://ukparliament.github.io/ontologies/procedure/maps/crag-treaties/components/lords-committees/lords-committees.pdf) gained [a summation step to gather up EU Committee and sub-committee allocations](https://trello.com/c/3Yytd7QA/185-add-summation-step-to-lords-committee-component-map-for-allocation-eu).

We had hoped to move on to mapping the draft composite procedure of [Census Act](https://www.legislation.gov.uk/ukpga/Geo5/10-11/41/body/enacted#section-1-2) fame. We had erroneously believed this to be a cut and shut job of the draft negative and the draft affirmative procedures. Except that in this case, amendments to the approval motion in the affirmative half of the procedure amend not only the motion but also the questions in the Census. So long as both Houses agree. How agreement between the Houses might be orchestrated remains unclear. A handful of emails later and the fine minds of JO Jane, [TO Matt](https://twitter.com/MattKorris) and JO Mike have promised to ponder.

So for now, we are SI done. Definitely. Absolutely. Finally. Til next week.

## Back to public bills

Even before the popping of champagne corks ceased to ring in our ears, we were ready to pick up the public bill baton. We have a [rough map](https://ukparliament.github.io/ontologies/procedure/flowcharts/bills/public-bill.pdf) dating from pre-lockdown days - thanks [David](https://twitter.com/clerkly), thanks [Paul](https://twitter.com/CourtenayIlbert), thanks [Martyn](https://twitter.com/martynpatrick) - but that was drawn using our old-style, [route-based procedure](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/with-route-types/) model. So we've begun to convert the bits we can convert to our new-style, [step-type-based](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/with-step-types/) model. For now, that means we have [maps and data for legislative consent motions](https://trello.com/c/3EHEcay8/191-public-bill-migration-to-new-model-legislative-consent) in the [Northern Ireland Assembly](https://ukparliament.github.io/ontologies/procedure/maps/primary-legislation/components/devolved-legislature-consent/northern-ireland-assembly/northern-ireland-assembly-consent.pdf) and the [Welsh Parliament](https://ukparliament.github.io/ontologies/procedure/maps/primary-legislation/components/devolved-legislature-consent/welsh-parliament/welsh-parliament-consent.pdf). Which may not be the most interesting part of the procedure but is, at least, [newsworthy](https://twitter.com/josiahmortimer/status/1436282175507378176?s=21). More public bill news to follow. Much more.

## Being good citizens

In other news, our [Jianhan](https://twitter.com/jianhanzhu) has been [chipping away at our redirects](https://trello.com/c/m8KAsvFT/195-change-business-item-urls-from-http-to-https). Since the [SI](https://statutoryinstruments.parliament.uk/) and [treaty](https://treaties.parliament.uk/) services first went live, both [TNA](https://www.nationalarchives.gov.uk/) and Parliament have converted their websites from HTTP to HTTPS. Our links still worked - or at least mostly worked (don't ask) - but only via the medium of redirects. And if we are anything, we are good web citizens. Every redirect that doesn't need to happen is a computer doing work it doesn't need to do. And we can hardly laugh at the blockchain bros when we're wasting compute and electricity on redirects. So now our links are stored as HTTPS and served as HTTPS and the computers can take a break. Proof of work being no substitute for work.

## Kind hearts / Coronets

Finally, progress has continued to be made on our efforts to port David's [peerage data](https://api.parliament.uk/peerages) into the [History of Parliament Trust](https://www.historyofparliamentonline.org/) website. We've spent a fair bit of time [reshaping the data](https://ukparliament.github.io/ontologies/peerage/peerage-ontology.html) to allow us to capture [subsequent holders](https://api.parliament.uk/peerages/peerages/840) of peerages as well as peerages created in the [Kingdoms of England](https://api.parliament.uk/peerages/kingdoms/1/letters-patent), [Ireland](https://api.parliament.uk/peerages/kingdoms/3/letters-patent) and [Great Britain](https://api.parliament.uk/peerages/kingdoms/4/letters-patent). And Scotland should we ever find a data source. [James](https://twitter.com/jamesjefferies) has been busy repurposing the code he wrote for the [Rush database](https://membersafter1832.historyofparliamentonline.org/) into something more suitable for peerages. Which led to librarian Ned and Michael spending a small part of the week clicking and testing and testing and clicking. Most of the bugs are now squished and most of the feature requests fulfilled. More testing beckons next week and - give or take our requirement for a new data dump from David and some nudging of identifiers - we should be ready to go live soon.