# 2021 - Week 4

## A truly amazing week

We have had a truly amazing week. We know this might seem hard to believe. But on this one, trust us. Quite amazing.

For the past we've-forgotten-how-long, our team of crack librarians and computational experts have been planning and plotting to switch our [procedure model](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html) from one based on [route](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e164) types to one based on the purest of pure logic. From the very earliest days of the [Statutory Instrument service](https://statutoryinstruments.parliament.uk/) we've imagined web pages that show not only what has happened and what is scheduled to happen but also [extend a light cone into the future](https://thevoroscope.com/2017/02/24/the-futures-cone-use-and-history), to show what is likely to happen and what might possibly happen next. Which is why we took to modelling procedure in the first place. And why we didn't create yet another link hub. Whilst the old route based model took us part of the way down this road, it did not and could not allow us to describe logical combinations of the kind one finds in legislation and standing orders. The kind of logic that says if ( ( this OR this has happened ) AND this ) AND NOT that, then this is something that should happen next.

In order to make the switch, Librarian Jayne and computational 'expert' [Michael](https://twitter.com/fantasticlife) have spent the last little while remapping procedures. [Jianhan](https://twitter.com/jianhanzhu), meanwhile, has been beavering away fixing the plumbing to support the new model. With both maps and plumbing in place we entered the new procedure data, dragged [work package](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e222) data out of the live database, and the moment of truth arrived. Could we [visualise a work package](https://trello.com/c/CSr8KMvp/26-rewrite-work-package-visualisation) subject to a procedure and show not only what has happened and what is scheduled to happen, but also indicate what should happen next and what might possibly happen next? 

To that end Jianhan has been pouring his considerable intellect into how we might parse a procedure map in the context of a work package, ably assisted by young Robert and Michael who were, by this stage, on their [second iteration of some pseudocode](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/parsing/#with-step-types). Luckily - as it turned out - Jianhan missed a line in the [design notes](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/) around the behaviour of a un[actualised](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e367) business step. Which led to an early evening call with Michael to check why the maps weren't working. This was all diagnosed and fixed within a minute. And had the delightful side effect of placing Michael in a ringside seat as Jianhan pressed the refresh button and [the whole thing actually worked](https://ukparliament.github.io/ontologies/meta/weeknotes/2021/04/pnsi.png). Quite a moment. Quite a moment indeed. Michael is still wiping tears from his eyes.

Shortly thereafter [Anya](https://twitter.com/bitten_) and Michael were to be found on one of their occasional smoking breaks. Anya pointed out that there was a difference between something not being allowed to happen yet and something not being allowed to happen now. Which is exactly the kind of hair she likes to split. An example of the former might be, you can't put the question on a motion that has not yet been tabled. An example of the latter being you cannot certify under [English Votes for English Laws](https://www.parliament.uk/site-information/glossary/english-votes-for-english-law-evel/) because [the standing orders governing that are currently suspended](https://publications.parliament.uk/pa/cm201919/cmstords/341/body.html#_idTextAnchor396). At this point Michael turns to an analogy of an island with one bridge. It is of little interest that the roads on the island are open if you're on the mainland and the bridge is shut. Islands and their bridges being a new requirement, on Thursday Robert and Michael sat down to [rewrite pseudocode](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/parsing/#with-step-types-2) and on Friday they rewrote their accompanying design notes, as Jianhan ploughed on with the real work of making their scribblings work in code. He's now battling with a new route state of UNTRAVERSIBLE to capture both closed roads and open roads on the far side of a closed bridge. Robert and Michael retired with broken heads. Everyone hopes that Anya is happy.

Back in the engine room, Jayne and Michael continued their mission to remap the [made negative SI procedure](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/made-negative.pdf) to [something more logical](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/logic-gates/made-negative.pdf). Their time this week has been mostly dedicated to [checking last week's work](https://trello.com/c/oOUrPDYh/21-enter-made-negative-data-to-staging). Drawing the maps is challenging and, dare we say it, mentally stimulating. Checking them is not. Not at all. Back when we were younger and less tired, we agreed a rule to not sign off on checking until a full and clean pass is made. A rule Jayne and Michael have come to regret. On Monday Jianhan's step checker script flagged nine errors. By Wednesday they were down to two errors, and had fixed them both. Thursday saw the final check and both hand drawn and machine generated maps appeared to be in agreement. Thank god. One more day and joyless tears would have been inevitable. Anyway, they made it through. The machines have checked our work and we have checked theirs. We still think our version is more attractive and has a better lay out, but the machine drawn one is also pretty impressive. Pretty impressive.

## A lovely chat with JO Jane

On Wednesday, when the team ought to have been tucking into lunch, they were instead dialling in to yet another pixel based meeting. Luckily though this one was with JO Jane. So Anya, Jayne, Robert and Michael had no cause for complaint. In the first five minutes they covered a dab of special relativity, a dash of quantum mechanics, a spot of collapsing probability spaces and a touch of the light cone of future potential. 'Futurologists' may well categorise potential into the preferable, the projected, the probable, the possible, the plausible and the downright preposterous. And it's also possible - or at least plausible - that the House of Lords would benefit from a more nuanced taxonomy.

Alternative futures dispensed with, those assembled proceeded to get down to business with a most useful conversation about procedural steps that on the one hand might be considered redundant when seen through the rear view mirror, but on the other might be valuable waymarkers if your eyes are pointed through the windscreen. The conversation arose as Jayne and Michael wished to [rename committee steps](https://trello.com/c/9KNWtQpk/333-select-committee-steps-decision-or-consideration) currently described as 'decisions', to the less confusing 'considerations'. Jane was unbothered either way but does wish to see steps that add noise removed from the website. We're hoping this will be partly resolved by a request to our colleagues in Software Engineering to display business items having a single URL [grouped into a single card](https://trello.com/c/uIrCwiJ3/303-si-171-business-items-sometimes-actualise-multiple-steps). But there will always be a more granular flavour of data we wish to collect for querying purposes that Jane does not wish to see on the website. The reporting criteria of the [Joint Committee on Statutory Instruments](https://committees.parliament.uk/committee/148/statutory-instruments-joint-committee) set out in House of Lords public Standing Order 73 being [a good case in point](https://trello.com/c/g8m2w3N6/13-cb-reporting-criteria-permission).

The upshot of all this was a request from Jane to finally put the [key step](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e336) part of the procedure model into practice. A thing we hope to do once the migration to logic gates is complete. Hopefully turning [Member action steps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e352) and [procedure concluding steps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e321) from [cards](https://trello.com/c/yLSVyjU0/207-member-step-key-step-and-conclusion-step) into code whilst we're on the job. Once we have key steps, we'll be able to say that this step is key in this procedure. And this other one is not. And the website will have the option to display some of it. Or all of it.

## Procedure mapping

Within minutes of emerging from the JO Jane meeting, Librarian Jayne once more had her face buried in maps and data as [committee decision steps became committee consideration steps everywhere](https://trello.com/c/9KNWtQpk/333-select-committee-steps-decision-or-consideration).

In other nomenclature news, [David](https://twitter.com/clerkly) had pointed out that our use of the word 'suspension' when dealing with House of Lords standing order 73 was not in fact correct. And that [suspension](https://ukparliament.github.io/ontologies/standing-order/standing-order-ontology.html#d4e174) should only be used when a standing order is suspended for all business for a period. And not when it's put aside for a single instrument. Jayne mailed Jane to check she was happy with changing 'suspended' to 'dispensed with'. Which she was. So that also is [done](https://trello.com/c/CvaBwxUu/339-jw-so-suspension-vs-so-dispensed-with).

This was the week that the [International Agreements Committee](https://committees.parliament.uk/committee/448/eu-international-agreements-subcommittee/) finally grew up, moved out and got a place of their own. At some point on Wednesday, Librarian [Claire](https://twitter.com/tinysprite) spotted [a motion](https://lordsbusiness.parliament.uk/ItemOfBusiness?itemOfBusinessId=91377&sectionId=38&businessPaperDate=2021-01-28) on the House of Lords order paper to turn what had been a sub-committee into a fully fledged Select Committee. Which meant Jayne and Michael once more hit data and [map](https://ukparliament.github.io/ontologies/procedure/flowcharts/crag-treaties/crag-treaties.pdf), adding new steps to cover calls for evidence, inquiries being opened, consideration happening, reports being reported and any Government response that might happen in reaction to that. As well as closing off a couple of bridges to the committee's earlier incarnation. All of which is now [inside the machines](https://procedures.azurewebsites.net/Procedures/6/graph).

By Friday, the committee had issued its first report, links had been added to the [treaty tracker](https://treaties.parliament.uk/), and - get this - Jayne had written a new [SPARQL](https://en.wikipedia.org/wiki/SPARQL) query to return [reports by the IAC during the past week](https://api.parliament.uk/sparql#query=%23+This+query+uses+classes+from+UK+Parliament's+procedure+ontology%3A+https%3A%2F%2Fukparliament.github.io%2Fontologies%2Fprocedure%2Fprocedure-ontology.html.%0A%0A%23+This+query+looks+for+all+treaties%2C+subject+to+the+Constitutional+Reform+and+Governance+Act+2010%2C+that+were+considered+by+the+International+Agreements+Committee+(IAC).+%0A%0APREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX+%3A+%3Chttps%3A%2F%2Fid.parliament.uk%2Fschema%2F%3E%0APREFIX+id%3A+%3Chttps%3A%2F%2Fid.parliament.uk%2F%3E%0A%23+The+above+rows+describe+where+the+datasets+that+this+query+is+built+on+come+from.+%0A%0Aselect+%3FTreaty+%3FTreatyname+%3FworkPackage+%3FLeadOrg+%3FSeries+%3FLink+%3Fdecision+%3Fdate2+%3FLink2+where+%7B%0A++%23+The+select+row+is+identifying+what+information+to+return+from+the+query.+These+are+all+variables+from+the+query+below.+SPARQL+variables+start+with+a+%3F+and+can+match+any+node+(resource+or+literal)+in+the+RDF+dataset.%0A%0A++%3FTreaty+a+%3ATreaty+.++%0A+++++%3FTreaty+rdfs%3Alabel+%3FTreatyname+.%0A+++%23+A+treaty+is+considered+a+workpackageable+thing+which+is+the+focus+of+a+workpackage.%0A++%0A++%23++It+is+useful+to+be+able+to+have+queries+that+allow+information+to+be+added+to+the+solution+where+the+information+is+available%2C+but+do+not+reject+the+solution+because+some+part+of+the+query+pattern+does+not+match.+The+use+of+OPTIONAL+below+allows+this%2C+if+the+data+does+not+exist+then+it+will+still+include+the+treaty+in+the+results.+The+reason+we+include+the+optional+for+the+variables+below+is+because+treaties+do+not+follow+a+strict+pattern+of+what+data+it+has.+Likewise%2C+there+can+also+be+a+delay+in+a+treaty+being+published+on+gov.uk+so+we+also+say+links+are+optional+so+that+any+possible+instrument+appears+in+the+results+still.+%0A++%0A++OPTIONAL%7B+%3FTreaty+%3AtreatyHasLeadGovernmentOrganisation%2F+rdfs%3Alabel+%3FLeadOrg+.%7D+%0A++OPTIONAL+%7B%3FTreaty+%3AtreatyHasSeriesMembership%2F+%3AseriesItemCitation+%3FSeries.%7D%0A++OPTIONAL+%7B%3FTreaty+%3AworkPackagedThingHasWorkPackagedThingWebLink+%3FLink.%7D%0A%23+While+these+filters+are+optional+they+are+still+vital+information+for+a+treaty.+The+LeadOrg+is+the+Department+responsible+for+the+treaty's+policy+which+is+different+to+the+laying+body.+The+Series+is+what+the+treaty+is+referenced+as.+And+of+course+a+link+to+the+treaty+itself.+++%0A++%0A+%3FTreaty+%3AworkPackagedThingHasWorkPackage+%3FworkPackage+.%0A++%23+A+workpackage+is+a+group+of+business+items+under+a+procedure+or+as+determined+by+a+committee%2C+for+example%3A+business+items+considered+during+the+passage+of+a+particular+Statutory+Instrument.%0A+%0A++%3FworkPackage+%3AworkPackageHasBusinessItem+%3Fbi2.%0A++%3Fbi2+%3AbusinessItemHasProcedureStep+%3FstepId2%3B%0A+++++++%3AbusinessItemHasBusinessItemWebLink+%3FLink2%3B%0A++%3AbusinessItemDate+%3Fdate2.%0A++%3FstepId2+%3AprocedureStepName+%3Fdecision%0A++FILTER+(%3FstepId2+in+(id%3AHKgXbapn%2C+id%3An3eNw1cK))%0A++%23+The+variables+above+are+looking+for+another+business+item+but+this+time+limiting+them+to+the+decisions+of+the+International+Agreements+Committee+Committee.+%0A%7D%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fapi.parliament.uk%2Fsparql&requestMethod=POST&tabTitle=Treaties+considered+by+the+International+Agreements+Committee+(HL)&headers=%7B%7D&outputFormat=table). If you're a treaty minded kinda person, this is definitely worth a bookmark. Top, top work Jayne.

And whilst we're on the subject of SPARQL, Jayne has [finished adding comments](https://trello.com/c/BFYSMqLf/150-add-comments-to-sparql-library) to our [sparkling library of SPARQL queries](https://ukparliament.github.io/ontologies/procedure/meta/queries/). So if you're less than familiar with the syntax, you should still be able to take a query, adjust it accordingly and return something sensible. If there's a query you'd like to see but you're not quite sure how to approach it, do [get in touch](mailto:RIIDMSMailbox@parliament.uk).

## On orders being standing

Jayne has helpfully [idiot checked](https://trello.com/c/CMF38OdX/326-sense-checking-standing-order-ontology) Robert and Michael's comments on our [shiny new standing order model](https://ukparliament.github.io/ontologies/standing-order/standing-order-ontology.html). Thanks Jayne. If you're a person with an interest in standing orders, you may be in receipt of an email sometime soon.

## In continuence of our limited education

Education continued as ever as Anya and Michael barged their way into a [Hansard at Huddersfield](https://hansard.hud.ac.uk/site/index.php) seminar. More excitingly still, Anya and [Phil](https://twitter.com/philbgorman) were lucky enough to get paid to attend the first in their series of [Wikidata themed lectures](http://wikiedu.org/wikidata/). They were even given homework. Which is one thing to do of a locked down evening.