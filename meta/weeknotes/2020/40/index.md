# 2020 - Week 40

## Expanding the family

Librarians [Anya](https://twitter.com/bitten_), Jayne and [Claire](https://twitter.com/bitten_https://twitter.com/tinysprite), together with computational specialist [Michael](https://twitter.com/fantasticlife), dedicated Wednesday to interviews, with candidate librarians forming a stack pattern before coming into land in Microsoft Teams. Of all places. Everything went surprisingly well. No technical glitches were experienced, broadband stayed upright and presentations delivered were both informative and entertaining. More of the same on Monday and Tuesday.

## Procedure mapping

Our [Jianhan](https://twitter.com/jianhanzhu) continued his quest to make [time bound procedural routes](https://trello.com/c/CDGB80DD/57-time-bound-routes) a thing that exists in code. He's applied a final coat of varnish to our [work package visualisations](https://procedures.azurewebsites.net/WorkPackages/2778/graph), based on some [pseudocode](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/parsing/) scribbled a fortnight back. Librarian Jayne has tested and declared herself quite content. We await integration testing with our colleagues in Software Engineering, to check we don't inadvertently break the [Statutory instrument](https://statutoryinstruments.parliament.uk/) and [treaty](https://treaties.parliament.uk/) websites. And once that's done, our time bound routes card can finally move to the done pile. It's marvellous having Jianhan back in the fold.

At some point during the week, Anya had cause to share a [SPARQL](https://en.wikipedia.org/wiki/SPARQL) query. SPARQL queries tend to be on the long side. And now that Librarian Jayne has taken to adding comments, they've got longer still. Which reminded us that [Samu](https://twitter.com/langsamu) once built a rather snazzy [link shortener](https://api.parliament.uk/s). Which, at some point, stopped working. A ticket had been raised back in February, but that was when development effort on the data platform was paused. So we enquired of Jianhan, and within an hour it was fixed. Samu - should he still be reading these notes - will be delighted to hear he had "done this elegantly" and it was "easy to spot the issue". Which turned out to be a token in need of renewal. A reminder has been set for next time. It really, really is marvellous having Jianhan back.

Our [Ben](https://twitter.com/benwoodhams) has managed to pick up a project investigating how the Lords might digitise their 'hanging files'. This might take some explanation. The 'hanging files' are indeed files. They're called 'hanging files' because they hang. In a cupboard. Alongside an index that looks not unlike a hotel visitors book, except it's loose-leaf and lists references pointing toward yet more cupboards. The files themselves form part of the institutional memory of the Lords and a historian could probably lose the rest of their lives in there. Michael jotted notes and sketched out a [fag packet data model](https://github.com/ukparliament/ontologies/blob/master/meta/precedence/lords/hanging-files.pdf). We're under the impression that there's a similar set up in the Commons. If you have access to their "hanging files" and are happy for us to take a peep, we'd be delighted.

In terms of actual mapping, Librarian Jayne and Michael put in a solid hour on Thursday ticking off assorted tidy up tasks. Journal Office Jane pointed out [we'd been a little overenthusiastic adding requires routes](https://trello.com/c/NuySwJyR/199-definition-of-requires-routes) in our negative procedures, from decisions on motions to decisions taken by committees. There is a Standing Order that prevents their Lordships taking a decision on an affirmative motion before the [Joint Committee on Statutory Instruments](https://committees.parliament.uk/committee/148/statutory-instruments-joint-committee) has reported, but there is no such restriction in the negative procedures. So we've removed those routes. For those interested, the Lords public Standing Order for affirmative instruments is number 72. But anchor links appear to have been removed from Standing Orders. So we can't link to it. You'll have to take our word.

A bunch of requires routes had also entered our procedures, [stating that debates and decisions in the Commons could not happen before EVEL certification](https://trello.com/c/J1nfaL12/187-pe-check-whether-a-chamber-debate-can-happen-in-commons-before-evel-certification). But reading the applicable Standing Orders we could spot no such explicit requirement. So these routes have also been removed.

A couple of weeks back, Jayne and Michael added a new route in the made affirmative map from 'Instrument remains law' to 'Instrument comes into force as law'. This to cope with Class ii) affirmative instruments - which are laid after being made and cannot come into force unless the instrument is approved - under the [Local Government Finance Act 1988](https://www.legislation.gov.uk/ukpga/1988/41/contents). This had the [unfortunate side-effect](https://trello.com/c/I2bY0dUb/154-dg-can-a-local-gov-finance-si-come-into-force-before-approval) of creating free floating bubbles in all our other [made affirmative visualisations](https://procedures.azurewebsites.net/WorkPackages/1449/graph). That route has been removed, and a new allows route added from 'Local Government Finance Report (England) approved' to the coming into force step. Which seems to have fixed everything but made us wonder if we need a whole new procedure to describe Class ii) affirmative instruments. Time will tell.

Another [floating bubble](https://trello.com/c/SdCS0YCG/138-pe-db-draft-affirmative-approved-without-debatefloating-bubble) rose up from the [Greater Manchester Combined Authority (Fire and Rescue Functions) (Amendment) Order 2020](https://statutoryinstruments.parliament.uk/timeline/6Gcux8oX/SI-2020/) which, rather than being debated, went straight to the question being put in both Houses. This happened this way as it is a copy and paste of an earlier SI which had successfully passed through Parliament, but which government had forgotten to make. No debate took place because the previous instrument had been debated, and nothing had changed since. So we now have an allows route from the tabling of the motion directly to the question being put,  bypassing any debate. And one less floating bubble.

A couple of weeks back, assorted librarians and Michael agreed that the 'Approval period ends' step of any SI under the Local Government Finance Act 1988 should not be actualised with a date, as the date is of a 'this date, unless this thing happens first' variety. [Anya disagreed](https://trello.com/c/Ai2uIgpE/158-actualising-the-new-approval-period-ends-step-for-instruments-under-local-government-finance-act-1988) and made her disagreement known. End dates are only ever anticipated. So that rule has now been updated and the one instrument we've seen so far re-indexed. She is, after all, the boss.

Away from procedural maps and with one foot firmly in the door of precedence, Robert has been busy writing a [Glitch script](https://fpoon.glitch.me/) to load [SPARQL queries from Gists](https://gist.github.com/robertbrook/ea40d7710e53c8eb0409229bc6e25db2), run them against our [SPARQL endpoint](https://api.parliament.uk/sparql#) and [return the results as JSON](https://fpoon.glitch.me/process?url=https%3A%2F%2Fgist.github.com%2Frobertbrook%2Fea40d7710e53c8eb0409229bc6e25db2). So now we have another way to share queries. Top work Robert.

### Things we did nothing about

Librarian Jayne recently spotted that [most rare of things](https://trello.com/c/JpMptChL/195-ps-ma-motion-to-take-note-of-an-si-commons-side): an [Early Day Motion to take note of an SI](https://edm.parliament.uk/early-day-motion/57419). After checking in with [Martyn](https://twitter.com/martynpatrick) and Peter, it was decided that a take note motion on an SI - at least in the Commons - is as procedurally pertinent as a written question being asked about it. So we decided on the easiest and most correct course of action. And did nothing.

Following a [brief exchange on Twitter](https://twitter.com/fantasticlife/status/1310862383984848896), [Arabella](https://twitter.com/Arabella_Law) kindly agreed to take a look at our [treaty map](https://ukparliament.github.io/ontologies/procedure/flowcharts/crag-treaties/crag-treaties.pdf) and double check our Standing Order and legislation citation blobs. She suggested we might be [missing a route](https://trello.com/c/cNJebTsM/192-treaties-committee-recommendation-to-not-ratify) from a committee recommending that the treaty should not be ratified, to the tabling of a motion to not ratify. Jayne and Michael sat down to squint at the map and came to the conclusion that such a route might make sense if the map were to be read as a flowchart. But, given [the maps are intended to act more like state diagrams](https://ukparliament.github.io/ontologies/procedure/flowcharts/design-notes.html#why-are-some-routes-not-recorded), and that the motion to not ratify is already 'in play', they once again came to the conclusion that the route would be redundant and decided to do nothing.

## Your weekly egg timer update

In more elevated circles the start of the month is marked by pinching, punching and shouting, "RABBITS!". In our corner of the world, the beginning of a new month heralds our free Heroku account recovering some tokens and living to fight another day. After running out of two pence pieces somewhere around the 20th of September, the egg timer took a break and our tinkering was rather hard to test. But [now it's back online](http://parliament-calendar.herokuapp.com/). At least until we run out of tokens again. This time it has new calculations informed by all the things we've learnt from our clerkly and lawyerly friends.

Robert and Michael have been hard at work translating assorted bits of legislation into software. And not only that. The comments are all written in [Markdown](https://en.wikipedia.org/wiki/Markdown), with citation links to any informing legislation, which we then pass through Robert's shiny new Markdown parser to build HTML pages. And more Markdown, of course. Which hopefully means our logic is legible to both clerks and lawyers. If not, we're more than happy to spend time reading through and translating. Think about it though: legislation as software, with comments, in Markdown, with links, to legislation, parsed into Markdown. Sometimes we thrill ourselves. We now have new calculations for [Proposed Negative Statutory Instruments](http://parliament-calendar.herokuapp.com/pnsi.rb.html), [bicameral](http://parliament-calendar.herokuapp.com/bicameral_si_either_house_sitting.rb.html) and [Commons only SIs](http://parliament-calendar.herokuapp.com/commons_only_si.rb.html) under the Statutory Instruments Act 1946, and [treaties](http://parliament-calendar.herokuapp.com/treaty.rb.html). 

On Thursday, Arabella kindly invited Librarian Jayne and Michael to a meeting on how Parliament plans to approach scrutiny of the forthcoming Japan / UK trade deal. Which caused Michael to over excitedly share the egg timer. Whereupon he noticed that it wasn't working. Because we hadn't populated the calendar far enough in advance. Jayne leapt to the rescue and populated our assorted calendars up to and including the 22nd of December 2020. At which point, [our sync script](https://github.com/fantasticlife/egg-timer/blob/master/lib/tasks/sync.rake) failed. So Michael spent all of Friday attempting to debug that. And realised at around 6pm the first thing he'd changed at 10am had actually fixed it. But he'd been running the wrong version of Ruby all day. A pretty advanced level of computational cockup. Even by his standards.

Calendars populated, sync script working, code deployed, we now have [an anticipated end date for scrutiny falling out of our data and software pipes](http://parliament-calendar.herokuapp.com/calculator/calculate?procedure=10&start-date=2020-11-02&day-count=21). It's a different date to the date currently doing the email rounds. Which either means someone has not spotted [scrutiny starts on the first joint sitting day *following* laying](https://www.legislation.gov.uk/ukpga/2010/25/part/2#section-20-2). Or our code is wrong. Again. Next week we plan to sit down with coffee, calendar and abacus and double, triple, quadruple check what's happening here. Wish us luck. We also plan to plan what our plan is for keeping the calendar up to date. A task to be officially supported by our crack team of librarians.

## Exploring search

Our [three](https://commonslibrary.parliament.uk/) [research](https://lordslibrary.parliament.uk/) [departments](https://post.parliament.uk/) are keen to improve the quality of search across their output. To this end, we suggested repurposing Robert's Bing based search, this time scoped to three subdomains. Possibly [four](https://researchbriefings.parliament.uk/). Our Jianhan spent part of last week tinkering with the backend to scope to publishers. And part of this week scoping to types of research papers, based on a list of URL clues provided by [Oli](https://twitter.com/olihawkins). Thanks Oli. Robert has started work on a front end that takes JSON from the [Open Search](https://en.wikipedia.org/wiki/OpenSearch) API and renders it. We hope to build a wee form to hook up to Jianhan's new parameters and present the results as a quick and dirty demo. But this week Jianhan hit a snag. We have a requirement to toggle between listing by relevancy and listing by recency. But Bing isn't being fed enough data to deal with the latter. So for now the work is on hold, awaiting a meeting next week between Lina and Robert. Or this week, as Anya would say. Once more expressing her own idiosyncratic sense of time.

## Strolls

Back in the glory days of weeknotes - when we still wrote with a gentle self-depracating humour and a lightness of touch that now evades us - we regularly made room for recollections of our many strolls. On Tuesday, Anya, Robert and Michael took the afternoon off and headed into The City for a decent stroll that started at Temple, took in [a Hawksmoor](https://en.wikipedia.org/wiki/St_George_in_the_East) and ended at the [Prospect of Whitby](https://en.wikipedia.org/wiki/Prospect_of_Whitby). It was wonderful to see the wheels of commerce spin back into life and a sense of normality finally return. [If you're Edgar Allan Poe anyway](https://twitter.com/fantasticlife/status/1310944040456728576).

 

