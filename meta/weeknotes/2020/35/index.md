# 2020 - Week 35

## Procedure mapping

[Jianhan](https://twitter.com/jianhanzhu) continued to make excellent progress on [adding time bound routes](https://trello.com/c/CDGB80DD/57-time-bound-routes) to our [procedure model](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html). This will allow us to open new routes through procedure - and close off old ones - as legislation, [Standing Orders](https://www.parliament.uk/site-information/glossary/standing-orders/) and allocations to committees change, flex and adapt. All anticipated code is now deployed on our test environment, ready for our colleagues in Software Engineering to test we haven't inadvertently broken our integration. If the testing goes to plan, we'll be ready to move the code to the live environment and begin to rework the [procedure](https://procedures.azurewebsites.net/Procedures/1/graph) and [work package](https://procedures.azurewebsites.net/WorkPackages/3178/graph) visualisations.

Librarian Jayne and [Michael](http://twitter.com/fantasticlife) kicked off their week with a little light [Trello](https://trello.com/b/HRIwjNQD/parliament-procedure) gardening. They're trying to clear the decks - and their heads - of any quick fixes to [procedure maps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#maps) and data before they move on to re-mapping with [logic gates](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e186). Redrawing the maps has been on the backlog since early 2019 but they didn't want to get stuck in until the necessary code changes looked possible. Because maintaining two lots of maps to reflect changes in procedure was a headache they didn't need to have. But now we have Jianhan back, code changes are once again within our grasp. So Jayne and Michael have been mostly tearing out weeds and preparing the ground for a whole new way of working.

Having split the barren soil from the good stuff, they turned their attention back to their [generic motion model](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/meta/motions/motion.png) and the flow from the main motion to a fatal amendment and back again. They think their procedure map now says that a motion, having been moved, can only be proposed or the question put if there's no fatal amendment or the fatal amendment hasn't been withdrawn or lapsed. And if there is a fatal amendment - that hasn't been withdrawn or lapsed - the route from the motion being moved flows to the allowing of the moving of the fatal amendment. And the fatal amendment having been negatived, the flow returns to the possibility of proposing the main motion or putting the question on the main motion forthwith. Try that one after taking a drink. Emails have winged their way to [David](http://twitter.com/clerkly), Paul and [Matt](https://twitter.com/MattKorris) in the hope they can explain it better.

Jayne and Michael also spend a part of small part of Monday [adding a missing route](https://trello.com/c/mFTWOpHT/174-made-affirmative-procedure-should-revoking-preclude-scsi-decision) to both [made affirmative map](https://ukparliament.github.io/ontologies/procedure/flowcharts/sis/made-affirmative.pdf) and [data](https://procedures.azurewebsites.net/Procedures/1/graph). They got as far as updating pixels to say an instrument being revoked now precludes a decision being made by
the [Select Committee on Statutory Instruments](https://committees.parliament.uk/committee/149/statutory-instruments-select-committee) and then found a small bug in the procedure editor. Which Jianhan had kindly fixed by mid afternoon. So now maps and data are aligned and another tiny gap is plugged.

Tuesday morning found Jayne and Michael embarking on more autumnal cleaning of procedure maps and data. Mostly around a bunch of issues that surfaced when Jayne went back to double check her workings during summer recess. These were:

* A causal route from Lords Chamber debate to the question being put on the approval motion in the made affirmative procedure is now an allows route to [bring it into line with what's been done elsewhere](https://trello.com/c/bmUbIOjY/170-made-affirmative-procedure-should-commons-chamber-debate-cause-question-put).

* A question about whether there should be [reciprocal preclusions between various types of creating and making various flavours of made affirmative](https://trello.com/c/kjdgmmZg/175-made-affirmative-procedure-should-there-be-preclusion-routes-between-the-created-made-steps) was pondered. Given our current understanding of [how we think the maps should be parsed](https://ukparliament.github.io/ontologies/procedure/flowcharts/design-notes.html#how-is-a-procedure-map-parsed-in-the-context-of-a-work-package), we decided these were unnecessary and so did nothing.

* The allows route from 'Instrument created under Section 55(3) in conjunction with Section 56(5) of the Sanctions Act' to 'Instrument under Section 55(3) in conjunction with Section 56(5) of the Sanctions Act made (signed into law)' again in the made affirmative procedure is now causal. And not allows. As it should always have been. Given this is a made affirmative procedure.

* A discrepancy between maps and data had somehow crept in, whereby the data had a preclusion between 'Laid before the House of Lords' and 'Instrument approved by the House of Commons' and [the map did not](https://trello.com/c/gqAVgRFs/169-discrepancies-in-made-affirmative-data-map). We suspect Michael may have been having one of his mornings. The map is now fixed and all stars in alignment.

* Another [map / data discrepancy](https://trello.com/c/tLMHTcGn/178-wonky-precludes-in-made-affirmative) came to our attention when we spotted the map had 'Local Government Finance Report (England) approved' both causing *and* precluding 'Approval period for instrument under paragraph 5(3) of Schedule 7 to the Local Government Finance Act 1988 ends'. Which is clearly, logically impossible. Jayne and Michael decided Michael must have pointed his arrows in the wrong direction and at the wrong thing. So the original preclusion has now vanished to be replaced by a new preclusion from 'Approval period for instrument under paragraph 5(3) of blah blah blah ends' to 'Question on motion to approve the Local Government Finance Report (England) put' which makes a lot more sense.

* Librarian Jayne had contacted Journal Office Jane to check [whether a fatal motion in a negative procedure would ever be debated in Grand Committee](https://trello.com/c/dhh9AWm0/167-negative-procedures-in-the-lords-can-fatal-motions-be-debated-in-gc). The answer came back from the Whips Office that, "they would never schedule a fatal motion for GC in case it was put to a vote". But also that there was nothing specifically precluding this. So Jayne and Michael decided it was more a question of precedence and updated both maps and data to say that the tabling of a fatal motion allows rather than precludes a debate in Grand Committee. The fact that that is never likely to happen being more a question of query than map.

* And finally - completely finally - Journal Office Jane had answered a similar question about whether fatal and non-fatal prayers in an affirmative procedure would ever be debated in Grand Committee. The answer being somewhat similar to the above: non-fatal prayers may well be debated in GC but fatal prayers will always be debated in the Chamber. Though this again is more a matter of "custom and practice and discretion" than a hard and fast "rule". So, again, Jayne and Michael decided it was more of question of precedence, updating maps and data to remove the preclusion from the tabling of a fatal prayer to the consideration motion. And, having noticed they'd broken their cardinal rule of [the maps being state diagrams and not flowcharts](https://ukparliament.github.io/ontologies/procedure/flowcharts/design-notes.html#why-are-some-routes-not-recorded), also removed a few redundant allows routes from prayer tabling to debates.

Beds tidied, tools put away and a fresh cup of tea prepared, [Anya](https://twitter.com/bitten_), Jayne and Michael decided to sketch out some rough plans for replanting their garden with logic gates. They made a few suggestions for changes to the [procedure editor database schema](https://github.com/ukparliament/ontologies/blob/master/procedure/meta/editor/schema.png). Possibly, unhelpfully, shown in green and red. Which will most probably confuse Michael at some point in the not too distant future. A [new trello card](https://trello.com/c/QF20qpUD/111-logic-gates-in-procedure) was also created with a checklist so long it does suggest another board might be required fairly soon. But at least we have an outline now. So that's good.

## Your weekly egg timer update

Robert and Michael continued with their mission to comment all the things and made slow but steady progress through [the seven flavours of scrutiny period calculation](https://trello.com/c/VB9LwSFu/144-egg-timer-documentation) they've been forced to deal with. All comments are in [Markdown](https://en.wikipedia.org/wiki/Markdown) and Robert's shiny new parser now picks them up and spits out both HTML and more Markdown. Progress to date [is listed here](http://parliament-calendar.herokuapp.com/meta/comments). Clerkly heads are encouraged to take a look at our logic and idiot check.

## All about the collaboration

Librarian Jayne's first pass at building our [library of SPARQL queries](https://ukparliament.github.io/ontologies/procedure/meta/queries/) used [procedure step](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e175) labels. But procedure step labels, like all labels, are subject to change. Which meant we risked breaking the queries every time we tweaked a label. So attempt number two switched from using labels to identifiers. Which has the advantage of not breaking under label change and the disadvantage of being less than comprehensible. Friend of the family [Tony](https://twitter.com/psychemedia) had mentioned the queries we'd published were a little difficult to amend and adapt because [the identifiers were impenetrable to human understanding](https://twitter.com/psychemedia/status/1283475530084429824). He also suggested we might add comments to queries as a way to get around this. So that's exactly what Jayne has done. [Queries for Proposed Negative Statutory Instruments](https://ukparliament.github.io/ontologies/procedure/meta/queries/instrument-types/proposed-negative-statutory-instruments/) are now fully commented. [Queries for Statutory Instruments](https://ukparliament.github.io/ontologies/procedure/meta/queries/instrument-types/statutory-instruments/) are half done. And Tony has [declared himself much happier](https://twitter.com/psychemedia/status/1297860151672700928). Top customer service, Librarian Jayne. As part of that conversation, [Leigh](https://twitter.com/ldodds) chipped in with [a link to a GitHub repo to generate documentation from SPARQL queries](https://twitter.com/ldodds/status/1297864667117891584) which Jayne has been peering at intently and hopes to use someday soon. Thanks Leigh.

Back in the before days, Anya, Robert, Michael and [Silver](https://twitter.com/silveroliver) had been kicking around the idea of submitting a project proposal to the [Parliamentary Academic Fellowship Scheme](https://www.parliament.uk/mps-lords-and-offices/offices/bicameral/post/fellowships/parliamentary-academic-fellowship-scheme/). Because concepts in the [UK Parliament Thesuari](http://www.data.parliament.uk/dataset/thesauri) are quite granular, and because parliamentary material is subject indexed at quite a granular level, they wondered how they might "roll up" the taxonomy in a way that made it amenable to browsing. Using something a little more nuanced than simple [transitivity](https://en.wikipedia.org/wiki/Transitive_relation). They also wondered if it might be possible to identify compound concepts from patterns of indexing. So could you fingerprint an event like the Grenfell Tower disaster when all pertinent material is indexed with 'Grenfell Tower' and 'fire cladding' but there is no composite concept for the event itself. Never being ones to pull fingers out without undue poking, they never quite got around to writing a brief. But this week a proposal from an external academic arrived via the fellowship scheme. Which was not identical but bore similarities. So Anya, Ian, Robert and Michael fired up teams and chatted all things taxonomic. No news yet but we will, as ever, keep you informed.



