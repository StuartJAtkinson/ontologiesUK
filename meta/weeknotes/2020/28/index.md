# 2020 - Week 28

## s/procedure/process mapping

Librarian Jayne and [Michael](https://twitter.com/fantasticlife) had fully and definitely and absolutely determined that this week they'd dive back into the horrors of the [Legislative Reform Order](https://www.parliament.uk/business/committees/committees-archive/regulatory-reform-committee/regulatory-reform-orders/) procedure map. But lockdown inertia and a slight fear that adding new procedures might cause bits of the website to explode brought that plan to a halt. More luck next week we hope.

On the subject of new procedures, we are definitely still in the market for feedback on our [map of the composite procedure](https://erskinemay.parliament.uk/section/5622/composite-procedure/). Hitherto known as the [hot mess required to get a Census Statutory Instrument through Parliament](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/sis/census.pdf). If you or someone you know has ever clerked a Census SI, please do [get in touch](mailto:RIIDMSMailbox@parliament.uk). We'd love to hear from you.

Michael did manage to pull his finger out long enough to do a bit more modelling of the [GOV.UK guide to marriage and civil partnerships](https://www.gov.uk/marriages-civil-partnerships). He's now [added identifiers to his hand drawn sketch](https://github.com/fantasticlife/process-flows/blob/master/maps/marriage/marriage.pdf), translated that into a [DOT file](https://github.com/fantasticlife/process-flows/blob/master/maps/marriage/marriage.gv), pushed the whole thing through [Gephi](https://en.wikipedia.org/wiki/Gephi) and made another one of these [incomprehensible graph visualisations](https://github.com/fantasticlife/process-flows/blob/master/maps/marriage/graphviz.pdf) that he occasionally subjects people to with a look of misplaced pride on his face. Next week sees a meeting between our very own Librarians [Anya](https://twitter.com/bitten_), Jayne and [Silver](https://twitter.com/silveroliver) and Felisia and [Ganesh](https://twitter.com/gansenthi) of the [Gubmint Computational Section](https://www.gov.uk/government/organisations/government-digital-service). They'll probably want to talk about other things, but Michael does not intend to be distracted from more process mapping. This is his big idea and it's a been a while since he had one.

## Your weekly egg timer update

Librarian Jayne and Michael met on Wednesday morning to do a little more testing on the [egg timer](http://parliament-calendar.herokuapp.com/). Michael had been under the impression that treaty period A followed the same logic as Legislative Reform Orders and [Localism Orders](https://guidetoprocedure.parliament.uk/articles/0jFPWpQS/localism-orders). And [Public Body Orders](https://www.parliament.uk/business/committees/committees-a-z/lords-select/secondary-legislation-scrutiny-committee/public-bodies-orders/#:~:text=LORDS-,Public%20Bodies%20Orders,to%205%20of%20the%20Act.) when they used to exist. Jayne wasted no time in correcting this impression. Apparently, whilst the other instruments turn over the egg timer on the day of laying if that is a joint sitting day or on the first joint sitting day following laying if the laying day is not a joint sitting day... We should probably take a small pause for breath here... Anyway, apparently treaties always flip the timer from the first joint sitting day following the laying day and never on the laying day even if that is a joint sitting day. We do hope you're following at home. There will be questions later. The upshot of this being, Michael has once again [patched up his code](https://github.com/fantasticlife/egg-timer/blob/master/app/controllers/calculator_controller.rb) and there is now a 7th style of calculation dedicated to treaty period A and only treaty period A. The upshot of the upshot being all procedures so far tested - [Proposed Negative Statutory Instruments](https://www.parliament.uk/site-information/glossary/proposed-negative-statutory-instrument/), [negative Statutory Instruments](https://guidetoprocedure.parliament.uk/collections/PtBJuBiU/negative-procedure) and treaties - all return dates that match those in the [SI](https://statutoryinstruments.parliament.uk/) and [treaty tracker](https://treaties.parliament.uk/) websites. So that's good.

One does wonder whose job it is to invent all this similar but subtly different logic. And why. We pride ourselves on never being computational determinists and always open to embrace complex adaptive systems. And we scowl at anyone who ever sinks to the level of calling parliamentary procedure 'arcane'. But. But. But. Just occasionally you do find yourself staring at some of this and thinking, that's nuts. Why have you done that? Was it even deliberate? Did you try drawing it first? And did you read any of the other legislation? Still, as [Chesterton had fences](https://en.wikipedia.org/wiki/Wikipedia:Chesterton%27s_fence), we have a selection of eggs and a growing selection of timers. Our role is not to question. Merely to document and look cross on occasion.

The egg timer started life as a Word document of calculation rules distributed by Journal Office Jane. Michael took one look and thought he'd be able to turn that into code in two or three days. Several weeks later he is still tweaking code and muttering to himself. But starting with the Word document was as good a place as any and most of the additions to calculations have started life as additional comments with code to follow, rather than additional code with comments to follow. Which is probably as close to [comment driven development](https://www.sitepoint.com/comment-driven-development/) as Michael and Robert are ever likely to get. And for something like this, they've found comments first is a pretty good approach. They've probably spent more time writing comments than they have writing code. Which means you don't need to know Ruby to get what the code is doing. And also means you can sit down with a clerk and talk them through the code without anyone have to worry about the syntax. So on Friday morning Librarians Anya and Jayne and computational expert Michael met with JO Jane and did exactly that. They talked her through how they populate their Google Calendars, how that [data flows to the application](https://github.com/fantasticlife/egg-timer/blob/master/lib/tasks/sync.rake), how the [monkey patched date class](https://github.com/fantasticlife/egg-timer/blob/master/lib/monkey_patching/date.rb) defines different types of parliamentary day and how the [calculation code](https://github.com/fantasticlife/egg-timer/blob/master/app/controllers/calculator_controller.rb) works. This could have gone rather badly, but luckily it did not. Jane confirmed that her spot testing had returned only correct numbers and found the code comments perfectly legible. We think in future we'll take a similar approach with similar code. If the logic comes from the brains of clerks, the code should be open source and should be well enough commented that it makes sense to someone who's never written a line in their lives.

Next week, Jayne and Michael plan to do more testing around bicameral made affirmatives but we still have some difficulties testing everything. LROs and Localism Orders are tricky to test because we have no data in the platform to test against. And whilst treaty period B exists as [a concept in legislation](http://www.legislation.gov.uk/ukpga/2010/25/part/2#section-20-5) it has never actually happened in reality. So that's hard to test too. But the trickiest testing is for Commons only SIs. These should follow calculations based on Commons sitting days only. And we have written the logic for this. But the Commons Journal Office has always used JO Jane's calculations which include sitting days in both Houses. This is potentially problematic, because an SI subject to 40 days scrutiny in the Commons could end up being passed on the 41st Commons praying day. Which would make it subject to legal challenge. Despite being rather stupidly busy, JO Jane has offered to do some egg timer testing against the dates she calculates a Commons only scrutiny period would end on. We have fingers very firmly crossed that this will not only work, but provide the Commons Journal Office with more accurate end dates than they currently have access to.

## All about the collaboration

Also on Wednesday, Michael had a Zoom call with [Tony](https://twitter.com/tmtm), one of the friendly folks working on the [Every Politician project](https://everypolitician.org/), now [based on Wikidata](https://www.wikidata.org/wiki/Wikidata:WikiProject_every_politician). Tony and [Andrew](https://twitter.com/generalising) have recently turned their attention to making a better fist of describing Members of the House of Lords. Michael talked Tomny through how we handle group associations in our [agency model](https://ukparliament.github.io/ontologies/agency/agency-ontology.html) and how we specialise that for [House membership](https://ukparliament.github.io/ontologies/house-membership/house-membership-ontology.html). They spent some time chatting through the various types of House of Lords seats and how incumbencies map to them, as well as discussing the rather challenging [pop stack](https://en.wikipedia.org/wiki/Stack_(abstract_data_type)) bishop problem. They headed off on a brief tour of both the [election](https://ukparliament.github.io/ontologies/election/election-ontology.html) and the [parliamentary bloc](https://ukparliament.github.io/ontologies/parliamentary-bloc/parliamentary-bloc-ontology.html) models and chatted about the horrors of having the Lord Speaker be a party. Michael emerged with a better understanding of Wikidata modelling and finally clocked that what Wikidata calls properties are in fact also classes. Which in retrospect should have been self-evident but hadn't been. We still have plans to map both models and instance identifiers where possible. With a resurrected data platform and decent mappings we should be able to push out changes to the world without ever having to worry about something as old fashioned as a website.

## Tiny chisel news

Robert has been on holiday this week. So Michael has been bored and lonely and pining. Robert is on holiday next week too. If anyone would like to chat to Michael, he'd appreciate it enormously.

