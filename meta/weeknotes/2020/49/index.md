# 2020 - Week 49

## Logicifying the procedure model

Week 49 started as [week 48](https://ukparliament.github.io/ontologies/meta/weeknotes/2020/48/) ended. At least we think it did. Weeks feel more like something we used to have, being more difficult to a define these days. Anyway, young Robert and [Michael](https://twitter.com/fantasticlife) staggered from Monday morning showers and coffee to once more fire up pixels and chat all things logical. Our [design notes](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/) are now reordered, rewritten and [inclusive of recent thoughts on logic gates](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/design-notes/#procedure-maps-with-logic-gates) in the form of words, pictures and truth tables. Should our loyal reader find a moment in their busy social calendar, we do hope they'll make a click and take a read. Feedback and [pull requests](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/meta/design-notes/index.md) are, as ever, more than welcome.

Design notes tidied, librarians [Anya](https://twitter.com/bitten_) and Jayne together with computational experts Robert and Michael spent part of Tuesday morning [re-looking at the legislation citation blobs](https://trello.com/c/Ent3yALT/297-relook-at-legislation-citations-on-pnsi-logic-gate-procedure) on our newly logical [Proposed Negative Statutory Instrument procedure map](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/proposed-negative-sis/logic-gates/proposed-negative-sis.pdf). Jayne had made a first stab at attaching legislation citations but, following careful consideration, some umming and indeed some ahing, all blobs have now been placed on logic gate steps. Which, given the legislation is often specifying conditionals, seems to make sense. We anticipate this is pattern we might well see repeated across [all our procedure maps](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#maps).

Away from the meta work, Librarian Jayne and Michael set about taking the previous week's scribblings on our classically logical PNSI procedure and [entering it into the machines](https://trello.com/c/nY1X6vnx/12-input-data-for-pnsi-procedure-to-staging). At which point, following some gentle prodding by [our Jianhan](https://twitter.com/jianhanzhu), the machines kindly spat out their [own version of our map](https://github.com/ukparliament/ontologies/blob/master/meta/weeknotes/2020/49/machine-pnsi.png) looking not unlike a line drawn, spatchcocked chicken. Next week we plan to take what we drew and what the computers drew and compare notes. Probably with more coffee and some marker pens. Being most careful to not get ink on the floors. We're forced to work on our own floors these days and we have to be more careful. In the meantime, we think having our first fully logical procedure map within sight of silicon is really rather cool. But possibly you have to be us.

## Orders being standing

As we entered Advent calendar season, our [Heroku](https://en.wikipedia.org/wiki/Heroku) tokens finally topped up and our first window popped open. Only to reveal our work to date on [making Standing Orders addressable](https://standing-orders.herokuapp.com/houses/1/business-extents/1). Our regular reader will recall we have something of an issue with the citation format of such things being based on the position of an order in a list. Positions which can and do change over time. So what is currently [House of Commons public Standing Order 14](https://standing-orders.herokuapp.com/revision-sets/260#fragment-14) was once [Standing Order 4](https://standing-orders.herokuapp.com/revision-sets/75#fragment-4). Then [5](https://standing-orders.herokuapp.com/revision-sets/90#fragment-5). Then [6](https://standing-orders.herokuapp.com/revision-sets/105#fragment-6). Then [13](https://standing-orders.herokuapp.com/revision-sets/145#fragment-13). Before finally becoming [14 on the 20th March 1997](https://standing-orders.herokuapp.com/revision-sets/173#fragment-14). Who knows what number it might have a decade from now. Whilst even our primitive monkey brains can learn to cope with such changes, the machines we're forced to work with are more primitive still. The conflation of label, identifier and list position makes it harder than it should be to construct persistent identifiers for orders and without persistent identifiers we can't generate persistent URIs. And we all know the sacrifices a URI has to make to be [considered cool these days](https://www.w3.org/Provider/Style/URI).

Luckily our friends in Oxford have been working on [a project to codify Standing Orders](https://parlrulesdata.org/) for assorted legislatures. Orders covering public business in the House of Commons being one such dataset. We've taken [their data](https://parlrulesdata.org/download.html) and reshaped it a little using a [Rake](https://www.rubyguides.com/2019/02/ruby-rake/) script that now takes about two hours to run and causes the fan on Michael's computer to do a reasonable impression of Apocalypse Now. We've also changed the labelling a little. What the Parlrules folk call articles we call orders, what they call sub-articles we call fragments and what they call versions we call revision sets. All this language still needs to be checked with clerkly colleagues and it's more than probable that [Anna](https://twitter.com/LoogaGirl), [David](https://twitter.com/clerkly), Paul, [Martyn](https://twitter.com/martynpatrick) and [Matt](https://twitter.com/MattKorris) will hear from us shortly. It's a different way of working for us. Usually we start with an empty whiteboard and a kindly clerk, which means we tend to get the language established fairly early on. But starting by poking at someone else's dataset is also kinda fun and saves a lot of work on data entry. Thanks friends in Oxford.

So far we have made lists of Standing Orders at all points in time [at which some kind of revision happened](https://standing-orders.herokuapp.com/revision-sets/110). You can [anchor link to the order as numbered](https://standing-orders.herokuapp.com/revision-sets/110#fragment-6) in the traditional style by appending #fragment-{order-number} to the URL. And you can [anchor link to a fragment of an order](https://standing-orders.herokuapp.com/revision-sets/110#fragment-6-4) by appending #fragment-(order-number}-{paragraph number}. Better still you can [link to either an order](https://standing-orders.herokuapp.com/orders/144) or [a fragment of an order](https://standing-orders.herokuapp.com/fragments/396) quite independently of any list positioning. And see [all versions of that order](https://standing-orders.herokuapp.com/orders/144/versions) or [fragment](https://standing-orders.herokuapp.com/fragments/396/versions) over time. This week Michael added a new table to capture where a new revision set had introduced a revision to a fragment and set about comparing the text of individual fragments to their direct predecessors. Having confirmed with David and Paul that no revision that merely changes the case of the text could be considered substantive, we now have two types of revision. Those were only the casing changes are marked as minor, those were the wording changes are considered major. Lists of [all revisions](https://standing-orders.herokuapp.com/fragments/396/versions/revisions), [major revisions](https://standing-orders.herokuapp.com/fragments/396/versions/revisions/major) and [minor revisions](https://standing-orders.herokuapp.com/fragments/396/versions/revisions/minor) are all available. At least anecdotally, most of the minor revisions appear have taken place in the early 1900s. We suspect a clerk at the time did not like capitalisation. That or their shift key was broken.

Michael also spent some considerable time writing code to chase Standing Orders back through time to build a simple node and edge graph of position changes over time. His intention was to spit out JSON and load it into some form of Sankey diagram to get a sense of when major edits to Standing Orders had happened. An intention that only half worked in practice. The application does indeed now output Sankey compliant node / edge JSON but loading the visualisation takes upwards of three minutes. And then crashes his browser. More work is needed here.

Finally, whilst the [data model](https://standing-orders.herokuapp.com/schema.png) we've generated is still subject to change and the language used needs more work, Michael has made a start on translating our relational model to something more ontological. So far it's [just a picture](https://github.com/ukparliament/ontologies/blob/master/_standing-order/standing-order.png). [Turtle](https://en.wikipedia.org/wiki/Turtle_(syntax)) and HTML to follow next week we hope.

## Your weekly egg timer update

Once again we have no real updates. Though this week did see the arrival of another of those start date / end date Word tables that JO Jane is forced to churn out. Librarian Jayne did some testing against the dates set out by JO Jane and declared both brain and code to be in agreement. So that's good. We plan to wait for a recess to check that our dates still agree for instruments laid when benches are empty before we roll out [the egg timer](https://parliament-calendar.herokuapp.com/) further. Should God ever grant us another recess.

## All about the collaboration

Anya and Michael met with [John](https://twitter.com/jb_tweets) and colleague on Tuesday. Back in the day, when we still left our houses, John was a denizen of [Newspeak House](https://www.nwspk.com/) and we spent many a happy hour chatting data on their smoking balcony. These days John has ventured to America and re-entered academia. He's currently looking at how journalism shapes debate within Parliament, working on a project to investigate if and how the language used in the kind of journalism that gets heavily shared on Facebook is reflected back in Hansard. Some time back, Anya supplied him with a session's worth of Hansard, annotated with the subject indexing her team applies. This data proved useful and now John would like more. Much more. A request for more sessions and more annotations is in the pipes.

One problem John faces is a problem we share. How to take material subject indexed at a granular level and use something more nuanced than simple transitivity to apply higher level categorisation. Anya and Michael pointed to the recent work to interlink the [Parliament Thesauri](http://www.data.parliament.uk/dataset/thesauri) with Wikidata, talked a little about the [BBC project to use Wikipedia categorisation hierarchies](https://www.bbc.co.uk/blogs/radio4/entries/2d6a771c-b390-4bfa-b94f-c460ed37dd7e) to generate high level categories and, of course, wondered out loud what bringing in additional data from Wikidata might help achieve. We intend to stay in touch.

## Documenting the documentation

Regardless of eventual implementation, we tend to like documenting our models as RDF Turtle. It allows us to put the model, the comments, the examples and the annotations into one place so we don't have to waste time on the horrors of separate data dictionaries and suchlike. We use a tool called [LODE](https://essepuntato.it/lode/) to turn fairly human friendly Turtle into very human friendly HTML. But, as good as LODE is, it doesn't always pick up on everything we include. Diagrams, for example, are included as [foaf:depictions](https://github.com/ukparliament/ontologies/blob/master/procedure/procedure-ontology.ttl#L15), contributors as [foaf:makers](https://github.com/ukparliament/ontologies/blob/master/procedure/procedure-ontology.ttl#L16) and links to additional documentation as [rdfs:seeAlsos](https://github.com/ukparliament/ontologies/blob/master/procedure/procedure-ontology.ttl#L53). All of which are ignored by LODE which means we're forced to hand edit HTML. Like it's 1989. So this week Robert and Michael spent a good hour populating a [brand new Trello](https://trello.com/b/dlh7AoOK/turtle-parsing) board with all the things they'd like to see from their own Turtle to HTML parser. With a fair wind we hope Robert might make a start on such a thing in due course. Though in fairness he has probably made at least ten starts in at least six languages so far. Still, eleventh time lucky as we like to say. 