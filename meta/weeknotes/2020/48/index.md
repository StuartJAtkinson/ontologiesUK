# 2020 - Week 48

## Modelling their Lordships

Our regular reader will by now surely know that our [source system for Member data](http://data.parliament.uk/membersdataplatform/) is good for telling us who was in the House of Lords and who is in the House of Lords. It even tells us which type of seat each bottom occupied or occupies. But it's not so good on the question of why. Or as our colleagues in the Lords might say, the virtues by which noble bottoms meet benches. Our [House membership model](https://ukparliament.github.io/ontologies/house-membership/house-membership-ontology.html) has the concept of a [house seat](https://ukparliament.github.io/ontologies/house-membership/house-membership-ontology.html#d4e29): a place reserved for a Member by virtue of their being elected - for a [constituency area](https://ukparliament.github.io/ontologies/election/election-ontology.html#d4e102) in the House of Commons or as an [excepted hereditary](https://en.wikipedia.org/wiki/By-elections_to_the_House_of_Lords) in Lords - [inheriting a seat](https://en.wikipedia.org/wiki/Hereditary_peer), being made a [life peer](https://en.wikipedia.org/wiki/Life_peer), being appointed a [Law Lord](https://en.wikipedia.org/wiki/Lords_of_Appeal_in_Ordinary), being [high up in the Church of England hierarchy or being one of four named bishops](https://www.parliament.uk/site-information/glossary/bishops/). Because the Members' Names Information System has both House membership and constituency representations - via [elections](https://ukparliament.github.io/ontologies/election/election-ontology.html) - it's possible to collapse the two arms into data describing an MP as [incumbent](https://ukparliament.github.io/ontologies/house-membership/house-membership-ontology.html#d4e63) in a seat aligned to a constituency. For the Lords, we're not so lucky. Which meant that when the data platform work kicked off we needed to find a way to "inflate" Lords membership data into incumbencies in seats. And the only route available was a set of Sharepoint tables.

This week [Julian ](https://datalanguage.com/blog/by/julian-everett) and [Silver](https://twitter.com/silveroliver) from [Data Language](https://datalanguage.com/) handed in their homework. They were tasked with investigating why the orchestration of Member data from MNIS to the platform failed at some point prior to the last General Election. It now appears that the Sharepoint tables were at some point migrated and the code was updated to reflect that. But as the location changed so did the permissions. And the code was not updated to cope with that. So every time the code runs and asks of the tables, "where should I place this bottom?", all it gets for its troubles is a [401](https://httpstatuses.com/401). Whether this will be solved by resurrecting the workaround and updating the code to have the appropriate permissions, or solved in a more long term fashion remains a question for elders and betters.

## Logicifying the procedure model

It was a big week this week. A properly big week. Librarians [Anya](https://twitter.com/bitten_) and Jayne and computational experts Robert and [Michael](https://twitter.com/fantasticlife) put the finishing touches to their first ever logic gate based procedural model: everybody's favourite [proposed negative statutory instrument](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/proposed-negative-sis/logic-gates/proposed-negative-sis.pdf). The PNSI is a slightly odd side effect of the [European Union (Withdrawal) Act 2018](https://www.legislation.gov.uk/ukpga/2018/16/contents/enacted), which we all thought we'd seen the back of. But still they arrive. The team have to admit they're rather pleased with the new model. They rather enjoyed the puzzle of drawing it. But they are somewhat starved for entertainment at the moment.

Robert, meanwhile, has been spending part of whatever it is that constitutes leisure time in these desperate days trying to wrap his head around how we might express said logic in [Prolog](https://en.wikipedia.org/wiki/Prolog). A task made slightly harder by the fact that he's never written Prolog before. And harder still because... well, Prolog. Nevertheless, he could not plough on without reading. And read he did. Last week he announced to an astonished audience that we'd taken a step out of [binary](https://en.wikipedia.org/wiki/Boolean_algebra) and into [ternary logic](https://en.wikipedia.org/wiki/Three-valued_logic). This week his reading caused him to question this conclusion. Or 'walk it back' as political journalists like to say. Ternary logic, he explained, is really more about how one deals with incorrect values and error states. But none of our values are incorrect and none of our states are errors. This week he declared we are back in the world of classical logic, although still dealing with a NULL state on routes. We do wish he'd make his mind up.

Robert and Michael took Robert's new found learnings and [applied them](https://trello.com/c/Fz25LzeA/293-rewrite-procedure-model-logic-gate-comments) to our beloved [procedure model](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html), decorating it with what we think is [our longest comment yet](https://ukparliament.github.io/ontologies/procedure/procedure-ontology.html#d4e186). They also removed some of the subclassing to bring the whole thing more in line with what we actually intend to implement.

Whilst they had their tiny commenting chisels sharpened they also took a look at our [procedural design notes](https://ukparliament.github.io/ontologies/procedure/flowcharts/design-notes.html) and, with surgeon-like precision, dedicated a good hour to shaving off thirty words or so. Maybe forty. There is still work to do to explain our current understanding of [our logic gate implementation](https://ukparliament.github.io/ontologies/procedure/flowcharts/design-notes.html#how-is-a-procedure-map-with-logic-gates-parsed-in-the-context-of-a-work-package). Not least to ourselves. But we do now have some [truth tables](https://ukparliament.github.io/ontologies/procedure/flowcharts/meta/logic-gates/truth-tables/). Like professionals. Our eagle-eyed reader might notice they do not quite meet the standard set by [Kleene and Priest](https://en.wikipedia.org/wiki/Three-valued_logic#Kleene_and_Priest_logics). But that, we have decided, does not matter. Those lads were all about the ternary. And we are classicists. Again. Until next week.

As if our PNSI cake were not complete, Librarian Jayne scattered sprinkles over the top and popped a cherry on the icing, with the addition of blobs to capture citations to legislation and [Standing Orders](https://www.parliament.uk/site-information/glossary/standing-orders/). The switch from our route type model to our logic gate model makes the question of which bits should do the citing rather more difficult. We probably need to sit down at some point and draw up some rules. But at least the Standing Order part was easy. Given there are no Standing Orders applicable to PNSIs.

## Orders being standing

On the subject of Standing Orders, Michael has continued to plug away with processing the new data from [our friends in Oxford](https://parlrulesdata.org/). Fragment versions are now linked to fragments, order versions and orders. And order versions are linked to orders. Making the model if not virtuous at least cyclical. We're still less than happy with the naming of things but nobody said [naming things was easy](https://martinfowler.com/bliki/TwoHardThings.html). 

Last week we had confirmation from Messrs. [Beamish](https://twitter.com/clerkly), Evans and [Korris](https://twitter.com/MattKorris) that a revision to a standing order which only changed the case would not - in their recollection - be considered substantive. And their recollection is quite good enough for us. So this week Michael has been running scripts over the text, recording when edits happened, and whether they were proper revisions or just some letters changing case. We would usually provide a link here but our [Heroku](https://en.wikipedia.org/wiki/Heroku) account is still lacking tokens and our website has entered suspended animation until the start of next month. Not that we would ever hold out a begging bowl. We still have some pride.

## Your weekly egg timer update

At some point last week, Librarian Jayne kindly offered to read through Robert and Michael's [code comments](https://parliament-calendar.herokuapp.com/meta/comments). At some point this week [she did so](https://trello.com/c/8a35yF4L/298-egg-timer-corrections-to-all-si-calculations). No problems were found with the code but she did diagnose some confusion in their middle aged heads between drafts and negatives and mades and affirmatives. The legislation they'd pointed to as informing made affirmatives did no such thing. Try as he might, Michael does not think he'll ever make his brain remember the differences between these four things. But he has, at last, made himself [a cheat sheet](https://github.com/ukparliament/ontologies/blob/master/procedure/flowcharts/sis/clocks/cheat-sheet.png).

Jayne reported back on the comments on Friday morning. Jayne, Robert and Michael were due to talk JO Jane through the comments late Friday afternoon. So they scrabbled together an hour out of their busy schedules and once more met in pixels. Comments were corrected, and they turned their attentions to the [user guide](https://parliament-calendar.herokuapp.com/meta/using) the Ja(y)nes had written, putting in bullet points and popping it online. It still needs to be linked to from the homepage. Robert.

Later that day they met with Jane, chatted through [three](https://parliament-calendar.herokuapp.com/bicameral_both_houses_sitting.rb.html) [lots](https://parliament-calendar.herokuapp.com/bicameral_si_either_house_sitting.rb.html) [of](https://parliament-calendar.herokuapp.com/commons_only_si.rb.html) statutory instrument calculation comments and [one lot for PNSIs](https://parliament-calendar.herokuapp.com/pnsi.rb.html). No [errors, mistakes or blunders](https://www.youtube.com/watch?v=cQ1ySyAqWVU)  were found, although by the time they packed up their pencil cases it was 5pm. So quite understandably their priorities had taken a turn toward another fun packed weekend of wet walks and weeknotes.