# 2024 - Week 10

## Panic stations: on written corrections, ministerial and otherwise

Way back in June 2023, the [House of Commons Procedure Committee](https://committees.parliament.uk/committee/126/procedure-committee/) published [a report](https://publications.parliament.uk/pa/cm5803/cmselect/cmproced/521/report.html) off the back of their [Correcting the Record inquiry](https://committees.parliament.uk/work/6794/correcting-the-record/). Amongst a host of other suggestions, they [proposed that non-Ministerial Members of the House should be able to issue written corrections](https://publications.parliament.uk/pa/cm5803/cmselect/cmproced/521/report.html#heading-4). A privilege previously afforded only to Ministers. Since then, the report has been put to the House and its recommendations accepted.

All of which means we have a new type of content to deal with. Whilst [Hansard](https://hansard.parliament.uk/) bills itself as "[t]he official report of all Parliamentary debates", for reasons lost to your correspondent, it also contains a whole host of other material. It is, for example, the home of [Written Ministerial Corrections](https://hansard.parliament.uk/Commons/2024-03-04/debates/D515A1D9-1DB8-4402-93BA-F57D968CCD95/Defence). It will also be home to Written Non-Ministerial Corrections - or Other Corrections as we appear to have imaginatively ended up calling them. There is then work to do, identifying all corrections in the Hansard [XML](https://en.wikipedia.org/wiki/XML) and placing them into Ministerial and non-Ministerial buckets. A job not made easy by Hansard XML definitely being a markup language whilst not really fitting the definition of extended. The elements present lending very little in the way of semantics to proceedings. As it were.

Further complications are added by another flavour of written Ministerial corrections flowing down the pipes from the Questions and Answers system. These in the shape of [written corrections](https://ukparliament.github.io/ontologies/question-and-answer/question-and-answer-ontology#d4e238) to earlier answers. Though at least all those are Ministerial in nature, so placing buckets to catch them is slightly easier.

The work to test existing systems with the new content type was work we had imagined had been done. Reader, it had not been done. Once more, we have had to call upon the talents of [our Jianhan](https://twitter.com/jianhanzhu) to separate the wheat from the other wheat. Which means he's been unable to made much progress with the search backend, replacing our taxonomy service and all the other things the poor lad gets asked to do. Please rest assured. We're told he spent the weekend setting up an end-to-end test version of our processing pipelines and is now in a position to both [prod and poke](https://trello.com/b/Bw4Hg04L/written-corrections). Top work Jianhan and best of luck.

## New, old search

Progress on all things backend may have ground to an emergency halt, but developer Jon and Librarians Jayne and Ned continue to churn through the quality assurance work for [new old search](https://search-prototype.herokuapp.com/search-prototype) object pages. Or item pages as we've taken to calling them now. When we remember. Joining the signed off pile this week are [written questions](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fhansard.intranet.data.parliament.uk%2FLords%2F2012-12-10%2F1212106000156), [oral questions](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fhansard.intranet.data.parliament.uk%2FLords%2F2021-05-19%2F21051926000130), [observations on petitions](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fhansard.intranet.data.parliament.uk%2FCommons%2F2022-12-19%2F2212199000020), [European scrutiny memoranda](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fesid.parliament.uk%2FEUDocument%2FEMDocument%2F19263%2F), [European material produced by EU institutions](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fesid.parliament.uk%2FEUDocument%2FEUMaterialDocument%2F95376%2F), the oddly named [European scrutiny recommendations (House of Commons)](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fesid.parliament.uk%2FEUDocument%2FRecommendationHoCPimsDocument%2F7092%2F) and last, but by no means least, [Ministerial corrections](https://search-prototype.herokuapp.com/search-prototype/objects?object=http%3A%2F%2Fdata.parliament.uk%2Fpimsdata%2Fhansard%2FPROCEEDING_67029). Though the latter may need more work when other types of written corrections start to flow though the pipes, for reasons outlined above.

Whilst we still have a fair few object - sorry, item - types to go, Head Gardener [Anya](https://bsky.app/profile/anyaso.bsky.social) and computational bothy boy [Michael](https://bsky.app/profile/fantasticlife.bsky.social) continue to do the groundwork for results pages. Since our last outing, they have further reviewed our [results item spreadsheet](https://docs.google.com/spreadsheets/d/1pHEwWKCojXBXvqD8vZ9VPhyRhtL-37K0j5D8UxAQMMI/edit?usp=sharing) to validate the 'can be many' column and make the labels consistent across content types.

If you're an old fogey like Michael and still using Twitter, you may also be aware that we've taken to [decorating our office walls with search result-themed post-it notes](https://twitter.com/fantasticlife/status/1759987164434076100), in a series of three of what Young Robert likes to call 'faciliated workshops'. To the tune of [Industrial Estate](https://www.youtube.com/watch?v=_ViEzjcc6sE&ab_channel=NeonMeateDream99). Excellent work all round from Librarians Anya, [Ayeseha](https://twitter.com/askalibrarylady), [Claire](https://twitter.com/tinysprite), Jayne and [Phil](https://bsky.app/profile/philbgorman.bsky.social).

If all goes to plan and the post-its don't lose their stickiness, a couple more sessions and we may well be done. Possibly. Given past experience, the post-it notes will almost certainly lose their stickiness and end up scattered over the floor. This is, in our experience, why most public sector 'digital' projects tend to fail.

[Young Robert](https://bsky.app/profile/robertbrook.bsky.social) and Michael tell us they think they've finished their first pass [Cucumber](https://github.com/ukparliament/solr-specs/blob/main/features/matching.feature) / [RSpec](https://github.com/ukparliament/solr-specs/blob/main/features/step_definitions/stepdefs.rb) test framework for our [Solr](https://en.wikipedia.org/wiki/Apache_Solr) upgrade. Or they did tell us that before Librarian Ned asked for the addition of a new specification to test the differences between text snippers returned for result items. So that's [more code that needs writing](https://github.com/ukparliament/solr-specs/blob/main/features/step_definitions/stepdefs.rb#L182). Other than that, it only remains for our [BDD](https://en.wikipedia.org/wiki/Behavior-driven_development) heroes to somehow persuade a [GitHub action](https://github.com/features/actions) to run the Cucumber and spit out some HTML. Ideally somewhere our librarians can see. It's a project they've [made a start on](https://github.com/ukparliament/solr-specs/blob/main/.github/workflows/main.yml), but not a project on which they can report any degree of success to date. Cries of BLASTED THING from room 13 rather giving the game away. Still, once that little gripe is cleared up, we believe we have everything we need to enable our crack team of librarians to enter any Solr compatible query, push it to GitHub and easily check the results.

On the subject of checking the results, if you tuned in [last week](https://ukparliament.github.io/ontologies/meta/weeknotes/2024/07/) you'll know Michael was [griping](https://ukparliament.github.io/ontologies/meta/weeknotes/2024/07/#new-older-search) - he gripes, he never whines - that default Cucumber output is not compatible with what he likes to call his "colour-divergent" eyes. A call went out for a Cucumber output format that is actually accessible to the 8% of males - and 0.5% of females - who share Michael's difficulties. The call was duly answered from close by when Young Robert went home and wrote a Cucumber parser that just prints the words passed and failed and whatnot. In reassuring black and white. Thank you Young Robert.

If, like us, you're a fan of development that's behaviour-driven and, like Michael, find yourself confused by the red-green spectrum, please do grab a copy of [Odin](https://github.com/ukparliament/solr-specs/blob/main/features/support/odin.rb). We hope it improves your life as much as it's improved Michael's. We did ask Young Robert why he chose the name Odin and, apparently, it's because he didn't go to comprehensive school and knows all about Germanic pagan people with wonky eyes. No way his parents wasted their money there.







## I am a procedural cartographer - to [the tune of the Palace Brothers](https://www.youtube.com/watch?v=owvF3Vb0JhA&ab_channel=tomkat69pc)

In correspondence with the Clerk and Policy Analyst from the International Agreements Committee, it was brought to our attention that not all treaty like things are signed. Some are in fact adopted. This went against earlier assurances from different folks that the word 'signed' could be substituted anytime we saw the word 'done' in a treaty title. We are, as ever, pleased to be corrected. Librarian Jayne has taken time out from quality assuring our search object - sorry, item - pages and amended our treaty procedure map to allow for some agreements being signed and some being adopted. An example of the latter being the [Convention, adopted at Paris on 17 October 2003, for the Safeguarding of the Intangible Cultural Heritage](https://treaties.parliament.uk/treaty/zw7npBgB/CP-1006). You have to love treaty titles.

Still with the subject of international agreement semantics, a wee while back we took the decision to describe pre-treaty negotiation steps on our terrific little treaty tracker. It has since been pointed out that a 'treaty' still under negotiation is not, in fact, a treaty, may never become a treaty and should not be called a treaty. For that reason, Librarian Jayne has also removed the word treaty from all negotiation period steps. Unfortunately, the word treaty still appears on the treaty tracker for things which are not yet - and may never be - treaties. [Negotiations for a potential agreement between the UK and Nigeria](https://treaties.parliament.uk/treaty/EekuU3bE/Negotiations-for-a-potential-agreement-between-the-UK-and-Nigeria) featuring the words 'Treaty brought to the attention of Parliament' being just one example. It would appear that someone has hard-coded this into an HTML template. Never an ideal place to manage information. A [ticket](https://trello.com/c/83PeyNgH/32-changing-the-label-of-treaty-brought-to-the-attention-of-parliament) has been raised with Computational Section colleagues to remedy this problem.

In our final piece of procedural mapping news, way back in the midst of time we added steps describing scrutiny clocks, as set out in legislation. Until this week, those steps were present in data, but never quite made it to pixels. Thanks to the diligence of Librarian Jayne, that gap is now closed, and you don't have to be a computer to clock our clocks.

## Return to model mountain

A couple of weeks back, Michael was left home alone with some paper, some string and some sticky tape. He proceeded to make a right mess of everything. His efforts were not entirely unrewarded when a string shaped gap popped up in what he likes to call his 'meta-model'. Whilst it would be hard to deny that an order to print results in some form of visible printed paper at some point, it's less clear what the subject of presentation might be. Our clerkly colleagues have been known to refer to the concept of a 'dummy bill' but we suspect that's because they're not librarians and not FRBR compliant. For that reason, our order to print model now makes a printed paper a type of paper expression and our presentation model now makes a presented paper a type of paper work. All very neat. At least on paper.

Our only other change has been the addition of yet another model specialising making available, this one describing papers being reported to a House by a committee. Or a formal body, as Michael likes to call them.

## People, places, parties (slight return)

Efforts to load notional results data into our psephology explorations came to a painful and grinding halt when Michael (re)realised that - in an Electoral Commission registration identifier sense - the Brexit Party and Reform UK are the same thing. In some quantum superposition sense. It's more than probable that several people had already pointed this out to the lad, but his memory is not what it once was.

This proved problematic because our code - such as it is - was keying off Electoral Commission IDs. Meaning we had a choice between showing the Brexit Party as standing in the next general election, Reform UK standing in previous general elections or actually sorting the problem out. Where sorting the problem out means populating election spreadsheets with MNIS party IDs, populating the notional results spreadsheet with the same and reimporting to key off those IDs in the application. Librarians Anna and Emily are, as ever, on the case.

In some work that did actually happen, we've now identified a reliable source of by-election data - should we ever get the time to deal with that - and generated mappings between the soon to be decommissioned election result website URLs and our own. Just in case some htaccess redirection file type thing should become possible. Michael has also turned what had been four different queries - for general elections by majority, vote share, turnout and declaration time - into a single query. Which should make things more maintainable. He hopes.

A wee while back, Statistician Carl asked for general election result listings by countries, English regions and some superset of Great Britain. We can't actually say we've done that yet, but at the preparatory work is ticked off. As in, we now at least acknowledge the concept of Great Britain. Not as easy a task as one might expect and one that led to some pretty horrendous SQL contortions. For a short while, Michael managed to put Northern Ireland in Great Britain. Not an outcome that would have pleased anyone, least of all Anya. That situation is now rescued and it only remains to write yet more SQL. Onwards.

## Bug squashing

Sometime late last year we put live our committee feeds application. Should you be in the market for oral evidence and committee publications direct to your inbox, we still recommend it. Except. Except, shortly after Christmas Librarian Jayne reported an error when a handful of publications from the International Agreements Committee failed to turn up. Investigations commenced and uncovered Heroku flagging some pretty horrendous errors. Errors which we believe are now fixed. Whilst HTML views still list everything that can be listed, RSS views are capped to the 20 latest items. We're not quite sure how Roy Fielding might feel about this, but we do our best with the tools we have at our disposal. Michael would like to add that he continues to "tail and grep logs", we suspect in some effort to sound vaguely computational.

## Turtles all the way down

Back on Thursday - we forget quite which Thursday - Michael had the good fortune to sit through a talk on the subject of "agile comms". A subject we've always had some interest in. Being a shy lad, it found it impossible to dive into chat and point out that - if anyone needed tips on such matters - these very weeknotes have been described as a "work of genius" by the bloke that wrote the book. In the more rarefied atmosphere of these notes, with but a single reader reading, his shyness has dissipated somewhat. We must apologise on his behalf. When he's not feeling shy, his arrogance can be quite overwhelming.